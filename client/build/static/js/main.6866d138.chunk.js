(this.webpackJsonpCOVinfo=this.webpackJsonpCOVinfo||[]).push([[0],{276:function(e,t,a){e.exports=a(547)},281:function(e,t,a){},337:function(e,t){},547:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),c=a(28),l=a.n(c),o=(a(183),a(281),a(17)),s=a(575),i=a(272),u=a(551),m=a(552),d=a(553),p=a(554),f=a(555),h=a(556),g=a(557),b=a(37),E=a(25),v=function(e){var t=e.style,a=void 0===t?{}:t,n=e.color,c=void 0===n?"black":n,l=e.className,o=void 0===l?"":l,s=e.size,i=void 0===s?100:s;return(r.a.createElement("svg",{version:"1.1",viewBox:"0 0 64 64",xmlns:"http://www.w3.org/2000/svg",style:a,fill:c,className:o,height:i,width:i},r.a.createElement("path",{d:" c-1.2-0.8-2.4,0.1-3.2,0.7c-0.1,0.1-0.3,0.2-0.4,0.3c0-0.2,0-0.4,0-0.5c0-0.9-0.1-2.5-1.6-2.9c-1.4-0.3-2.2,1-2.8,1.8  c-0.1,0.1-0.2,0.3-0.3,0.4c-0.1-0.2-0.1-0.3-0.2-0.5c-0.4-0.9-0.9-2.3-2.5-2.2c-1.5,0.2-1.8,1.7-2,2.6c0,0.1-0.1,0.3-0.1,0.5  c-0.1-0.1-0.2-0.3-0.3-0.4c-0.7-0.8-1.7-1.9-3.1-1.3c-1.3,0.7-1.1,2.2-1,3.2c0,0.2,0.1,0.4,0.1,0.6c-0.2-0.1-0.3-0.2-0.5-0.2  c-0.8-0.4-2.3-1.2-3.4-0.1c-1,1.1-0.3,2.4,0.2,3.3c0.1,0.2,0.2,0.5,0.3,0.7c-0.2,0-0.5,0-0.7,0c-1-0.1-2.6-0.2-3.2,1.3  c-0.2,0.5,0,1.1,0.5,1.3c0.5,0.2,1.1,0,1.3-0.5c0.1-0.2,0.8-0.1,1.2-0.1c0.9,0.1,2,0.1,2.6-0.8c0.6-0.9,0.1-2-0.3-2.8  c-0.1-0.3-0.4-0.8-0.4-1c0.2,0,0.7,0.3,1,0.4c0.8,0.4,1.8,0.9,2.7,0.3c0.9-0.6,0.8-1.8,0.6-2.7c0-0.3-0.1-0.8-0.1-1  c0.2,0.2,0.5,0.5,0.7,0.7c0.6,0.7,1.4,1.5,2.4,1.2c1.1-0.3,1.3-1.4,1.5-2.3c0.1-0.3,0.2-0.7,0.2-0.9c0.1,0.2,0.3,0.6,0.4,0.9  c0.3,0.9,0.8,1.9,1.8,2c1.1,0.1,1.7-0.9,2.2-1.6c0.1-0.2,0.4-0.6,0.5-0.8c0.1,0.3,0.1,0.7,0.1,1c0,0.9,0.1,2.1,1.1,2.5  c1,0.5,1.9-0.2,2.6-0.8c0.2-0.2,0.6-0.5,0.8-0.6c0,0.3-0.2,0.7-0.3,1c-0.3,0.9-0.6,2,0.1,2.7c0.8,0.8,1.9,0.5,2.7,0.3  c0.3-0.1,1-0.3,1.1-0.3c0,0.2-0.4,0.7-0.6,1c-0.5,0.7-1.3,1.7-0.8,2.7c0.2,0.4,0.5,0.6,0.9,0.6c0.1,0,0.3,0,0.4-0.1  c0.5-0.2,0.7-0.7,0.5-1.2c0.1-0.2,0.3-0.6,0.5-0.8C46.1,29.1,47,27.9,46.2,26.6z"}),r.a.createElement("path",{d:"M56.9,42.9c-1.1-0.7-2.5-0.5-3.4,0.3l-2.8-1.6c1-2,1.7-4.1,2.1-6.4l4,0.4l0.2-2l-4-0.4c0-0.4,0.1-0.8,0.1-1.2  s0-0.8-0.1-1.2l4-0.4l-0.2-2l-4,0.4c-0.3-2.3-1.1-4.4-2.1-6.4l2.8-1.6c0.9,0.8,2.3,1,3.4,0.3c1.4-0.8,1.9-2.7,1.1-4.1  s-2.7-1.9-4.1-1.1c-1.1,0.7-1.7,1.9-1.4,3.1l-2.8,1.6c-1.2-1.9-2.8-3.6-4.5-5l2.4-3.3l-1.6-1.2l-2.4,3.3c-0.7-0.4-1.4-0.8-2.1-1.2  l1.6-3.7l-1.8-0.8l-1.6,3.7c-2.1-0.8-4.3-1.3-6.6-1.4V7.8c1.2-0.4,2-1.5,2-2.8c0-1.7-1.3-3-3-3s-3,1.3-3,3c0,1.3,0.8,2.4,2,2.8v3.2  c-2.3,0.1-4.5,0.6-6.6,1.4l-1.6-3.7l-1.8,0.8l1.6,3.7c-0.7,0.4-1.4,0.8-2.1,1.2l-2.4-3.3l-1.6,1.2l2.4,3.3c-1.8,1.4-3.3,3.1-4.5,5  L11.6,19c0.2-1.2-0.3-2.5-1.4-3.1C8.7,15.1,6.8,15.6,6,17s-0.3,3.3,1.1,4.1c1.1,0.7,2.5,0.5,3.4-0.3l2.8,1.6c-1,2-1.7,4.1-2.1,6.4  l-4-0.4l-0.2,2l4,0.4c0,0.4-0.1,0.8-0.1,1.2s0,0.8,0.1,1.2l-4,0.4l0.2,2l4-0.4c0.3,2.3,1.1,4.4,2.1,6.4l-2.8,1.6  c-0.9-0.8-2.3-1-3.4-0.3C5.7,43.7,5.2,45.6,6,47s2.7,1.9,4.1,1.1c1.1-0.7,1.7-1.9,1.4-3.1l2.8-1.6c1.2,1.9,2.8,3.6,4.5,5l-2.4,3.3  l1.6,1.2l2.4-3.3c0.7,0.4,1.4,0.8,2.1,1.2l-1.6,3.7l1.8,0.8l1.6-3.7c2.1,0.8,4.3,1.3,6.6,1.4v3.2c-1.2,0.4-2,1.5-2,2.8  c0,1.7,1.3,3,3,3s3-1.3,3-3c0-1.3-0.8-2.4-2-2.8v-3.2c2.3-0.1,4.5-0.6,6.6-1.4l1.6,3.7l1.8-0.8l-1.6-3.7c0.7-0.4,1.4-0.8,2.1-1.2  l2.4,3.3l1.6-1.2l-2.4-3.3c1.8-1.4,3.3-3.1,4.5-5l2.8,1.6c-0.2,1.2,0.3,2.5,1.4,3.1c1.4,0.8,3.3,0.3,4.1-1.1S58.3,43.7,56.9,42.9z   M44,46.8l-1.2-1.6l-1.6,1.2l1.2,1.6c-0.6,0.4-1.1,0.7-1.7,1l-0.8-1.8L38,47.9l0.8,1.8C37,50.4,35,50.8,33,50.9V49h-2v1.9  c-2-0.1-4-0.5-5.8-1.2l0.8-1.8l-1.8-0.8l-0.8,1.8c-0.6-0.3-1.2-0.6-1.7-1l1.2-1.6l-1.6-1.2L20,46.8c-1.5-1.3-2.9-2.7-4-4.4l1.7-1  l-1-1.7l-1.7,1c-0.9-1.7-1.5-3.6-1.8-5.6l1.9-0.2l-0.2-2L13.1,33c0-0.3-0.1-0.7-0.1-1s0-0.7,0.1-1l1.9,0.2l0.2-2L13.3,29  c0.3-2,0.9-3.9,1.8-5.6l1.7,1l1-1.7l-1.7-1c1.1-1.7,2.4-3.2,4-4.4l1.2,1.6l1.6-1.2l-1.2-1.6c0.6-0.4,1.1-0.7,1.7-1l0.8,1.8l1.8-0.8  l-0.8-1.8c1.8-0.7,3.8-1.1,5.8-1.2V15h2v-1.9c2,0.1,4,0.5,5.8,1.2L38,16.1l1.8,0.8l0.8-1.8c0.6,0.3,1.2,0.6,1.7,1l-1.2,1.6l1.6,1.2  l1.2-1.6c1.5,1.3,2.9,2.7,4,4.4l-1.7,1l1,1.7l1.7-1c0.9,1.7,1.5,3.6,1.8,5.6l-1.9,0.2l0.2,2l1.9-0.2c0,0.3,0.1,0.7,0.1,1  s0,0.7-0.1,1L49,32.8l-0.2,2l1.9,0.2c-0.3,2-0.9,3.9-1.8,5.6l-1.7-1l-1,1.7l1.7,1C46.8,44,45.5,45.5,44,46.8z"}),r.a.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",width:"50%",height:"50%",x:"25%",y:"25%",viewBox:"0 0 24 24",fill:"none",stroke:c,strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},r.a.createElement("circle",{cx:"12",cy:"12",r:"10"}),r.a.createElement("line",{x1:"12",y1:"16",x2:"12",y2:"12"}),r.a.createElement("line",{x1:"12",y1:"8",x2:"12.01",y2:"8"}))))};var w=Object(E.b)((function(e,t){return Object(o.a)({},t,{user:e.user,authed:e.authed})}))((function(e){return r.a.createElement(s.a,{bg:"dark",className:"flex-column p-0"},r.a.createElement(s.a.Brand,{className:"mr-0 text-white h6 px-3 d-flex flex-column align-items-center"},r.a.createElement(v,{color:"lime",size:50,className:"hover-spinner"}),"COVinfo"),r.a.createElement(s.a.Collapse,{id:"basic-navbar-nav",className:"flex-column w-100"},r.a.createElement(i.a,{className:"flex-column w-100 flex"},r.a.createElement(b.b,{to:"/",exact:!0,activeClassName:"current",className:"text-center py-3 w-100 nav-item"},r.a.createElement(u.a,{size:35})),r.a.createElement(b.b,{to:"/map",activeClassName:"current",className:"text-center py-3 w-100 nav-item"},r.a.createElement(m.a,{size:35})),r.a.createElement(b.b,{to:"/chat",activeClassName:"current",className:"text-center py-3 w-100 nav-item"},r.a.createElement(d.a,{size:35})),r.a.createElement(b.b,{to:"/music",activeClassName:"current",className:"text-center py-3 w-100 nav-item"},r.a.createElement(p.a,{size:35})),r.a.createElement(b.b,{to:"/memes",activeClassName:"current",className:"text-center py-3 w-100 nav-item"},r.a.createElement(f.a,{size:35})),r.a.createElement("div",{className:"flex"}),e.authed?r.a.createElement(b.b,{to:"/settings",activeClassName:"current",className:"text-center py-3 w-100 nav-item"},r.a.createElement(h.a,{size:35})):r.a.createElement(b.b,{to:"/login",activeClassName:"current",className:"text-center py-3 w-100 nav-item"},r.a.createElement(g.a,{size:35})))))})),y=a(62),x=a(10),j=a(142),N=a(55),O=a(24),C={id:"data",type:"fill",paint:{"fill-color":{property:"cases",stops:[[0,"#abdda4"],[10,"#e6f598"],[100,"#ffffbf"],[1e3,"#fee08b"],[1e4,"#fdae61"],[1e5,"#f46d43"],[1e6,"#d53e4f"]]},"fill-opacity":.8}};function k(e){return e.toString().replace(/\B(?=(\d{3})+(?!\d))/g,",")}var S=Object(E.b)((function(e,t){return Object(o.a)({},t,{user:e.user,authed:e.authed})}))((function(e){var t=Object(n.useState)({width:"100%",height:"100%",latitude:39.9526,longitude:-75.1652,zoom:5}),a=Object(x.a)(t,2),c=a[0],l=a[1],s=Object(n.useState)(null),i=Object(x.a)(s,2),u=i[0],m=i[1],d=Object(n.useState)(null),p=Object(x.a)(d,2),f=p[0],h=p[1],g=Object(n.useState)(!0),b=Object(x.a)(g,2),E=b[0],w=b[1],y=Object(O.useToasts)().addToast;return Object(n.useEffect)((function(){document.title="Map | COVinfo",fetch("https://covinfo.tech/mapData").then((function(e){return e.json()})).then((function(t){var a=t.geoJson;t.coronaJson.forEach((function(t){var n=a.features.find((function(e){return e.properties.ISO_A3===t.countryInfo.iso3}));n&&(n.properties=Object(o.a)({},n.properties,{cases:t.cases,deaths:t.deaths,recovered:t.recovered,casesToday:t.todayCases,tests:t.tests,iso2:t.countryInfo.iso2}),e.authed&&e.user&&(e.user.country!==t.countryInfo.iso2&&e.user.country!==t.countryInfo.iso3||l(Object(o.a)({},c,{latitude:t.countryInfo.lat,longitude:t.countryInfo.long}))))})),m(a),setTimeout((function(){return w(!1)}),1e3)})).catch((function(e){console.log(e),w(!1),y("There was a problem loading the data",{appearance:"error",autoDismiss:!0})}))}),[]),r.a.createElement("div",{style:{flex:1,position:"relative"}},E?r.a.createElement("div",{className:"map-loading"},r.a.createElement(v,{color:"lime",size:100,className:"spinning-logo"})):null,r.a.createElement(j.c,Object.assign({mapboxApiAccessToken:"pk.eyJ1IjoibmdyZWdyaWNoYXJkc29uIiwiYSI6ImNrOHY0dGdsdjA2NjYzZnNmMWVzZW53OGQifQ.OLl9xQNCBOTHwVRlz-06lA"},c,{onViewportChange:l,mapStyle:"mapbox://styles/mapbox/dark-v9",onHover:function(e){var t=e.features,a=t&&t.find((function(e){return"data"===e.layer.id}));h(a)}}),r.a.createElement(j.b,{type:"geojson",data:u},r.a.createElement(j.a,C)),f?r.a.createElement("div",{className:"map-tooltip"},r.a.createElement("div",{className:"d-flex flex-row align-items-center"},r.a.createElement("div",{className:"font-weight-bold"},f.properties.ADMIN),f.properties.iso2?r.a.createElement(N.a,{countryCode:f.properties.iso2,className:"ml-1"}):null),r.a.createElement("div",{style:{width:"100%",height:1,backgroundColor:"#fff"}}),void 0!==f.properties.cases?r.a.createElement("div",null,"Total Cases: ",k(f.properties.cases)):null,void 0!==f.properties.deaths?r.a.createElement("div",null,"Deaths: ",k(f.properties.deaths)):null,void 0!==f.properties.recovered?r.a.createElement("div",null,"Recoveries: ",k(f.properties.recovered)):null,void 0!==f.properties.tests?r.a.createElement("div",null,"Tests: ",k(f.properties.tests)):null,void 0===f.properties.casesToday||0===f.properties.casesToday?null:r.a.createElement("div",null,"Cases Today:"," ",k(f.properties.casesToday)),r.a.createElement("div",{style:{fontSize:"1em"}},"Data Provided by"," ",r.a.createElement("a",{href:"https://github.com/NovelCOVID/API",target:"_blank",rel:"noopener noreferrer"},"NovelCOVID"))):null))})),T=a(252),_=a(253),D=a(269),I=a(273),L=a(29),A=a.n(L);var U=function(e){var t=Object(n.useState)(e.article),a=Object(x.a)(t,1)[0];return r.a.createElement("button",{className:"p-2 text-white d-flex flex-row align-items-center mb-3 text-left w-100 bg-transparent border newsStory",style:{borderRadius:10,borderColor:"lightgray"},onClick:function(){window.open(a.url,"_blank")}},r.a.createElement("img",{src:a.urlToImage||"https://designshack.net/wp-content/uploads/placeholder-image.png",width:70,height:70,style:{borderRadius:5,objectFit:"cover"},alt:"article_img"}),r.a.createElement("div",{className:"d-flex flex-column justify-content-center ml-3"},r.a.createElement("h5",{className:"mb-0 text-dark"},a.title),r.a.createElement("span",{className:"ml-2 h6 text-black-50"},a.source.name," \xb7",a.author&&""!==a.author.trim()?" ".concat(a.author," \xb7 "):" ",A()(a.publishedAt).fromNow())))},R=a(57),B=a(81),P=function(e){Object(I.a)(a,e);var t=Object(D.a)(a);function a(){var e;Object(T.a)(this,a);for(var n=arguments.length,r=new Array(n),c=0;c<n;c++)r[c]=arguments[c];return(e=t.call.apply(t,[this].concat(r))).state={global:{articles:[],loading:!0},local:{articles:[],loading:!0,title:"Local Coronavirus News"},coords:{latitude:null,longitude:null}},e.getLocalNews=function(){if(e.props.authed&&e.props.user){var t=e.props.user;e.handleGetNews(t.country).then((function(a){e.setState({local:{articles:a,loading:!1,title:"Local Coronavirus News (".concat(t.country,")"),country:t.country}})}))}else e.handleGetNews("United States of America").then((function(t){e.setState({local:{articles:t,loading:!1,title:"Local Coronavirus News (US)"}})}))},e.handleGetNews=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";return new Promise((function(t,a){e=" "+Object(B.getName)(e),fetch("https://newsapi.org/v2/everything?q=coronavirus".concat(e,"&from=").concat(A()().subtract(14,"days").format("YYYY-MM-DD"),"&sortBy=relevancy&language=en&apiKey=a24bf4b7cea34b6c88e899238f856cfa")).then((function(e){return e.json()})).then((function(e){"error"!==e.status?t(e.articles):a("There was a problem getting the news.")})).catch((function(e){a("There was a problem getting the news.")}))}))},e}return Object(_.a)(a,[{key:"componentDidUpdate",value:function(e){var t=this.props;e.authed!==t.authed&&(this.setState({local:Object(o.a)({},this.state.local,{loading:!0})}),this.getLocalNews())}},{key:"componentDidMount",value:function(){var e=this;document.title="Dashboard | COVinfo",this.handleGetNews().then((function(t){e.setState({global:{articles:t,loading:!1}})})),this.getLocalNews()}},{key:"render",value:function(){var e=this.state,t=e.global,a=e.local;return(r.a.createElement("div",{className:"d-flex flex-column flex p-3"},r.a.createElement("div",{className:"d-flex flex-row"},r.a.createElement("h3",{className:"flex ml-2"},"Global Coronavirus News"),r.a.createElement("div",{className:"flex ml-2 d-flex flex-row align-items-center mb-2"},r.a.createElement("h3",{className:"m-0"},a.title),r.a.createElement(N.a,{countryCode:a.country,className:"ml-1"}))),r.a.createElement("div",{className:"d-flex flex-row flex"},r.a.createElement("div",{className:"p-1 flex d-flex flex-column align-items-center ".concat(a.loading?"justify-content-center":"")},r.a.createElement(R.Scrollbars,{renderView:function(e){return r.a.createElement("div",Object.assign({},e,{className:"pr-3 flex d-flex flex-column align-items-center ".concat(t.loading?"justify-content-center":"")}))}},t.loading?r.a.createElement(v,{color:"lime",size:100,className:"spinning-logo"}):this.state.global.articles.map((function(e){return e.title&&""!==e.title.trim()?r.a.createElement(U,{article:e,key:e.publishedAt+e.title+"".concat(5*Math.random())}):null})))),r.a.createElement("div",{className:"p-1 flex d-flex flex-column align-items-center ".concat(a.loading?"justify-content-center":"")},r.a.createElement(R.Scrollbars,{renderView:function(e){return r.a.createElement("div",Object.assign({},e,{className:"pr-3 flex d-flex flex-column align-items-center ".concat(a.loading?"justify-content-center":"")}))}},a.loading?r.a.createElement(v,{color:"lime",size:100,className:"spinning-logo"}):this.state.local.articles.map((function(e){return e.title&&""!==e.title.trim()?r.a.createElement(U,{article:e,key:e.publishedAt+e.title+"".concat(5*Math.random())}):null})))))))}}]),a}(n.Component),z=Object(E.b)((function(e,t){return Object(o.a)({},t,{user:e.user,authed:e.authed})}))(P),M=a(271),W=a(558);var G=function(e){return r.a.createElement("div",{className:"mb-2 chatMessage bg-white p-2"},r.a.createElement("div",{className:"d-flex flex-row align-items-center mb-1"},r.a.createElement("h6",{style:{color:"#"+e.message.username_color},className:"mb-0"},e.message.username),r.a.createElement(N.a,{countryCode:e.message.country,className:"ml-1"})),r.a.createElement("span",{className:"ml-2"},e.message.message))},V=a(254),F=a.n(V)()("https://covinfo.tech/");var H=Object(E.b)((function(e,t){return Object(o.a)({},t,{user:e.user,authed:e.authed})}))((function(e){var t=Object(n.useState)(""),a=Object(x.a)(t,2),c=a[0],l=a[1],o=Object(n.useState)([]),s=Object(x.a)(o,2),i=s[0],u=s[1],m=Object(n.useRef)(i),d=Object(n.useRef)(null),p=Object(O.useToasts)().addToast;Object(n.useEffect)((function(){m.current=i}));var f=function(e){u([].concat(Object(M.a)(m.current),[e])),h()};Object(n.useEffect)((function(){return document.title="Chat | COVinfo",F.on("message",f),function(){F.off("message")}}),[]);var h=function(){d.current.scrollToBottom()},g=function(){fetch(encodeURI("".concat("https://covinfo.tech/","/chat/sendMessage?message=").concat(c,"&username=").concat(e.user.username,"&username_color=").concat(e.user.username_color,"&country=").concat(e.user.country)),{method:"POST"}).then((function(e){l("")})).catch((function(e){console.log(e),p("There was a problem sending the message.",{appearance:"error",autoDismiss:!0})}))};return r.a.createElement("div",{className:"w-100 h-100 d-flex flex-column"},r.a.createElement("div",{className:"flex pl-3 pt-3 pr-3 d-flex flex-column"},r.a.createElement("h3",null,"Quarantine Chat"),r.a.createElement(R.Scrollbars,{renderView:function(e){return r.a.createElement("div",Object.assign({},e,{className:"pr-3 flex"}))},ref:d},i.map((function(e){return r.a.createElement(G,{message:e,key:"".concat(e.username,"_").concat(10*Math.random())})})))),r.a.createElement("div",{className:"w-100 p-3"},r.a.createElement("div",{className:"w-100 d-flex flex-row rounded-pill messageInputContainer"},r.a.createElement("input",{type:"text",className:"flex bg-transparent border-0 py-2 px-3 messageInput",placeholder:e.authed?"Message...":"Login to enable chat...",onChange:function(e){return l(e.target.value)},onKeyDown:function(e){13===e.keyCode&&g()},value:c,disabled:!e.authed}),""!==c.trim()?r.a.createElement("button",{className:"bg-primary border-0 d-flex align-items-center justify-content-center pl-3 pr-4",style:{borderTopRightRadius:100,borderBottomRightRadius:100},onClick:g},r.a.createElement(W.a,{color:"white"})):r.a.createElement("div",null))))})),Z=a(14),Y=a.n(Z),K=a(559),q=a(560),J=a(573);var Q=function(){var e=Object(n.useState)(""),t=Object(x.a)(e,2),a=t[0],c=t[1],l=Object(n.useState)(""),o=Object(x.a)(l,2),s=o[0],i=o[1],u=Object(y.f)(),m=Object(O.useToasts)().addToast;return r.a.createElement("div",{className:"w-100 h-100 d-flex align-items-center justify-content-center offWhiteBackground"},r.a.createElement("div",{className:"bg-white d-flex flex-column align-items-center form-padding rounded boxShadow"},r.a.createElement("h3",null,"Log in"),r.a.createElement("div",{style:{height:1,width:"25%",backgroundColor:"gray"}}),r.a.createElement("div",{className:"d-flex flex-row align-items-center justify-content-center p-3"},r.a.createElement("button",{className:"smLoginButton bg-white rounded-circle p-2 d-flex align-items-center justify-content-center mx-2",onClick:function(){Y.a.auth().signInWithPopup(new Y.a.auth.FacebookAuthProvider).then().then((function(e){u.push("/"),m("Logged in.",{appearance:"success",autoDismiss:!0})})).catch((function(e){console.log(e),m("There was a problem logging in.",{appearance:"error",autoDismiss:!0})}))}},r.a.createElement(K.a,null)),r.a.createElement("button",{className:"smLoginButton bg-white rounded-circle p-2 d-flex align-items-center justify-content-center mx-2",onClick:function(){Y.a.auth().signInWithPopup(new Y.a.auth.GithubAuthProvider).then().then((function(e){u.push("/"),m("Logged in.",{appearance:"success",autoDismiss:!0})})).catch((function(e){console.log(e),m("There was a problem logging in.",{appearance:"error",autoDismiss:!0})}))}},r.a.createElement(q.a,null))),r.a.createElement("span",{className:"mb-2 text-muted"},"or use your email"),r.a.createElement(J.a,null,r.a.createElement(J.a.Group,{controlId:"formGroupEmail"},r.a.createElement(J.a.Label,null,"Email address"),r.a.createElement(J.a.Control,{type:"email",placeholder:"Email...",value:a,onChange:function(e){return c(e.target.value)}})),r.a.createElement(J.a.Group,{controlId:"formGroupPassword"},r.a.createElement(J.a.Label,null,"Password"),r.a.createElement(J.a.Control,{type:"password",placeholder:"Password...",value:s,onChange:function(e){return i(e.target.value)}})),r.a.createElement("button",{className:"bg-transparent border-0 float-right align-self-end mb-3"},"Forgot Password?")),r.a.createElement("button",{className:"bg-white smLoginButton rounded-pill py-2 px-3",onClick:function(){Y.a.auth().signInWithEmailAndPassword(a,s).then((function(e){u.push("/"),m("Logged in.",{appearance:"success",autoDismiss:!0})})).catch((function(e){console.log(e),m("There was a problem logging in.",{appearance:"error",autoDismiss:!0})}))}},"Log in"),r.a.createElement("button",{className:"bg-white smLoginButton rounded-pill py-2 px-3 mt-3",onClick:function(){u.push("/register")}},"Register")))},X=a(124),$={user:null,authed:!1},ee=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:$,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"UPDATE_USER":return Object(o.a)({},e,{user:t.user,authed:!0});case"CLEAR_USER":return Object(o.a)({},e,{user:null,authed:!1});default:return e}},te=Object(X.b)(ee,window.__REDUX_DEVTOOLS_EXTENSION__&&window.__REDUX_DEVTOOLS_EXTENSION__()),ae=a(561),ne=a(562);var re=function(){var e=Object(n.useState)(""),t=Object(x.a)(e,2),a=t[0],c=t[1],l=Object(n.useState)(""),o=Object(x.a)(l,2),s=o[0],i=o[1],u=Object(n.useState)(""),m=Object(x.a)(u,2),d=m[0],p=m[1],f=Object(n.useState)(""),h=Object(x.a)(f,2),g=h[0],b=h[1],E=Object(n.useState)("US"),v=Object(x.a)(E,2),w=v[0],j=v[1],N=Object(B.getData)(),C=Object(O.useToasts)().addToast,k=Object(y.f)(),S=function(e){Y.a.firestore().collection("users").doc(e).set({username:g,country:w,username_color:"000000",user_id:e}).then((function(){k.push("/"),C("User created.",{appearance:"success",autoDismiss:!0})})).catch((function(e){console.log(e),C("There was a problem creating the user.",{appearance:"error",autoDismiss:!0})}))};return r.a.createElement("div",{className:"w-100 h-100 d-flex align-items-center justify-content-center offWhiteBackground"},r.a.createElement("div",{className:"bg-white d-flex flex-column align-items-center p-5 rounded boxShadow"},r.a.createElement("h3",null,"Register"),r.a.createElement("div",{style:{height:1,width:"25%",backgroundColor:"gray",marginBottom:15}}),r.a.createElement(ae.a,{defaultActiveKey:"email",id:"registerTabs"},r.a.createElement(ne.a,{eventKey:"email",title:"Email"},r.a.createElement("div",{className:"d-flex flex-column align-items-center"},r.a.createElement(J.a,null,r.a.createElement(J.a.Group,{controlId:"emailUsername"},r.a.createElement(J.a.Label,null,"Username"),r.a.createElement(J.a.Control,{type:"text",placeholder:"Username...",value:g,onChange:function(e){return b(e.target.value)}})),r.a.createElement(J.a.Group,{controlId:"emailCountry"},r.a.createElement(J.a.Label,null,"Country"),r.a.createElement(J.a.Control,{as:"select",value:w,onChange:function(e){return j(e.target.value)}},N.map((function(e){return r.a.createElement("option",{key:e.code,value:e.code},e.name)})))),r.a.createElement(J.a.Group,{controlId:"emailEmail"},r.a.createElement(J.a.Label,null,"Email address"),r.a.createElement(J.a.Control,{type:"email",placeholder:"Email...",value:a,onChange:function(e){return c(e.target.value)}})),r.a.createElement(J.a.Group,{controlId:"emailPassword"},r.a.createElement(J.a.Label,null,"Password"),r.a.createElement(J.a.Control,{type:"password",placeholder:"Password...",value:s,onChange:function(e){return i(e.target.value)}})),r.a.createElement(J.a.Group,{controlId:"emailConfirmPassword"},r.a.createElement(J.a.Label,null,"Confirm Password"),r.a.createElement(J.a.Control,{type:"password",placeholder:"Confirm Password...",value:d,onChange:function(e){return p(e.target.value)}}))),r.a.createElement("button",{className:"bg-white smLoginButton rounded-pill w-25 py-2",onClick:function(){return""===g.trim()?C("A valid username is required.",{appearance:"error",autoDismiss:!0}):""!==a.trim()&&/^(([^<>()[\]\\.,;:\s@"]+(\.[^<>()[\]\\.,;:\s@"]+)*)|(".+"))@((\[[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}])|(([a-zA-Z\-0-9]+\.)+[a-zA-Z]{2,}))$/.test(String(a).toLowerCase())?""===s.trim()||""===d.trim()?C("A valid password is required.",{appearance:"error",autoDismiss:!0}):s!==d?C("Passwords do not match",{appearance:"error",autoDismiss:!0}):void Y.a.auth().createUserWithEmailAndPassword(a,s).then((function(e){S(e.user.uid)})).catch((function(e){console.log(e),C("There was a problem creating the user.",{appearance:"error",autoDismiss:!0})})):C("A valid email is required.",{appearance:"error",autoDismiss:!0})}},"Register"))),r.a.createElement(ne.a,{eventKey:"facebook",title:"Facebook"},r.a.createElement("div",{className:"d-flex flex-column align-items-center"},r.a.createElement(J.a,null,r.a.createElement(J.a.Group,{controlId:"facebookUsername"},r.a.createElement(J.a.Label,null,"Create Username"),r.a.createElement(J.a.Control,{type:"text",placeholder:"Create Username...",value:g,onChange:function(e){return b(e.target.value)}})),r.a.createElement(J.a.Group,{controlId:"facebookCountry"},r.a.createElement(J.a.Label,null,"Country"),r.a.createElement(J.a.Control,{as:"select",value:w,onChange:function(e){return j(e.target.value)}},N.map((function(e){return r.a.createElement("option",{key:e.code,value:e.code},e.name)}))))),r.a.createElement("button",{className:"bg-white smLoginButton rounded-pill w-25 py-2",onClick:function(){if(""===g.trim())return C("A valid username is required.",{appearance:"error",autoDismiss:!0});Y.a.auth().signInWithPopup(new Y.a.auth.FacebookAuthProvider).then().then((function(e){S(e.user.uid)})).catch((function(e){console.log(e),C("There was a problem creating the user.",{appearance:"error",autoDismiss:!0})}))}},r.a.createElement(K.a,null)," Register"))),r.a.createElement(ne.a,{eventKey:"github",title:"Github"},r.a.createElement("div",{className:"d-flex flex-column align-items-center"},r.a.createElement(J.a,null,r.a.createElement(J.a.Group,{controlId:"githubUsername"},r.a.createElement(J.a.Label,null,"Create Username"),r.a.createElement(J.a.Control,{type:"text",placeholder:"Create Username...",value:g,onChange:function(e){return b(e.target.value)}})),r.a.createElement(J.a.Group,{controlId:"githubCountry"},r.a.createElement(J.a.Label,null,"Country"),r.a.createElement(J.a.Control,{as:"select",value:w,onChange:function(e){return j(e.target.value)}},N.map((function(e){return r.a.createElement("option",{key:e.code,value:e.code},e.name)}))))),r.a.createElement("button",{className:"bg-white smLoginButton rounded-pill w-25 py-2",onClick:function(){if(""===g.trim())return C("A valid username is required.",{appearance:"error",autoDismiss:!0});Y.a.auth().signInWithPopup(new Y.a.auth.GithubAuthProvider).then().then((function(e){S(e.user.uid)})).catch((function(e){console.log(e),C("There was a problem creating the user.",{appearance:"error",autoDismiss:!0})}))}},r.a.createElement(q.a,null)," Register"))))))},ce=a(255),le=a(563);var oe=Object(E.b)((function(e,t){return Object(o.a)({},t,{user:e.user})}),(function(e){return{updateUser:function(t){return e({type:"UPDATE_USER",user:t})}}}))((function(e){var t=Object(n.useState)(e.user?e.user.username:""),a=Object(x.a)(t,2),c=a[0],l=a[1],s=Object(n.useState)(e.user?e.user.country:""),i=Object(x.a)(s,2),u=i[0],m=i[1],d=Object(n.useState)(e.user?e.user.username_color:"ffffff"),p=Object(x.a)(d,2),f=p[0],h=p[1],g=Object(n.useState)({}),b=Object(x.a)(g,2),E=b[0],w=b[1],j=Object(n.useState)(!1),N=Object(x.a)(j,2),C=N[0],k=N[1],S=Object(n.useState)(!0),T=Object(x.a)(S,2),_=T[0],D=T[1],I=Object(B.getData)(),L=Object(y.f)(),A=Object(O.useToasts)().addToast;Object(n.useEffect)((function(){e.user&&(D(!1),e.user.username!==c&&l(e.user.username),e.user.country!==u&&m(e.user.country),e.user.username_color!==f&&h(e.user.username_color))}),[e.user,c,l,u,m,f,h]);var U=function(e,t){var a=E;a[e]=t,w(a)},R=function(){k(!C)};return r.a.createElement("div",{className:"w-100 h-100 d-flex align-items-center justify-content-center offWhiteBackground position-relative"},_?r.a.createElement("div",{style:{position:"absolute",left:0,right:0,top:0,bottom:0,backgroundColor:"rgba(255, 255, 255, 0.4)"},className:"d-flex align-items-center justify-content-center"},r.a.createElement(v,{color:"lime",size:100,className:"spinning-logo"})):null,r.a.createElement("div",{className:"bg-white d-flex flex-column align-items-center p-5 rounded boxShadow"},r.a.createElement("h3",null,"Settings"),r.a.createElement("div",{style:{height:1,width:"25%",backgroundColor:"gray"}}),r.a.createElement(J.a,null,r.a.createElement(J.a.Group,{controlId:"settingsUsername"},r.a.createElement(J.a.Label,null,"Username"),r.a.createElement(J.a.Control,{type:"text",placeholder:"Username...",value:E.username||c,onChange:function(e){l(e.target.value),U("username",e.target.value)}})),r.a.createElement(J.a.Group,{controlId:"settingsCountry"},r.a.createElement(J.a.Label,null,"Country"),r.a.createElement(J.a.Control,{as:"select",value:E.country||u,onChange:function(e){m(e.target.value),U("country",e.target.value)}},I.map((function(e){return r.a.createElement("option",{key:e.code,value:e.code},e.name)})))),r.a.createElement(J.a.Group,{controlId:"settingsColor"},r.a.createElement("div",{className:"d-flex flex-row align-items-center justify-content-center"},r.a.createElement("div",{className:"rounded mr-2 position-relative",style:{width:30,height:30,backgroundColor:"#".concat(E.username_color||f)}},r.a.createElement("div",{style:{cursor:"pointer",width:30,height:30},onClick:function(e){e.preventDefault(),R()}}),C?r.a.createElement("div",{style:{position:"absolute",left:"-20%",top:"130%"}},r.a.createElement("div",{style:{position:"fixed",top:0,bottom:0,left:0,right:0},onClick:R}),r.a.createElement(ce.TwitterPicker,{color:"#".concat(E.username_color||f),onChangeComplete:function(e){h(e.hex.split("#")[1]),U("username_color",e.hex.split("#")[1]),R()}})):null),r.a.createElement("h6",{className:"mb-0"},"Username Color")))),r.a.createElement("button",{className:"bg-white smLoginButton rounded-pill w-25 py-2 ".concat(0===Object.keys(E).length?"fullButton":""),onClick:function(){Y.a.firestore().collection("users").doc(e.user.user_id).update(E).then((function(){e.updateUser(Object(o.a)({},e.user,{},E)),w({}),A("User saved.",{appearance:"success",autoDismiss:!0})})).catch((function(e){console.log(e),A("There was a problem saving the user.",{appearance:"error",autoDismiss:!0})}))},disabled:0===Object.keys(E).length},"Save User"),r.a.createElement("button",{className:"bg-white smLoginButton rounded-pill w-25 py-2 text-danger mt-2",onClick:function(){Y.a.auth().signOut().then((function(){L.push("/"),A("Logged out.",{appearance:"success",autoDismiss:!0})})).catch((function(e){console.log(e),A("There was a problem logging out.",{appearance:"error",autoDismiss:!0})}))}},r.a.createElement(le.a,null)," Log Out")))})),se=a(72),ie=a.n(se),ue=a(135),me=function(e){return new Promise((function(t,a){fetch("https://www.googleapis.com/youtube/v3/search?key=".concat("AIzaSyCBuW_IWsZ1biICjlWto_ySrSBiH8e0ZkA","&part=snippet&videoEmbeddable=true&q=").concat(encodeURI(e),"&type=video&videoCategoryId=10"),{headers:{Accept:"application/json"}}).then((function(e){return e.json()})).then((function(e){e.items?t(e.items):a("No videos found")})).catch((function(e){return a(e)}))}))},de=a(256),pe=a.n(de),fe=a(564),he=a(565),ge=a(567),be=a(568),Ee=a(569),ve=a(570),we=a(572),ye=a(259),xe=a(574),je=a(257),Ne=a.n(je);var Oe=Object(E.b)((function(e,t){return Object(o.a)({},t,{user:e.user,authed:e.authed})}))((function(e){var t=Object(n.useState)(""),a=Object(x.a)(t,2),c=a[0],l=a[1],s=Object(n.useState)([]),i=Object(x.a)(s,2),u=i[0],m=i[1],d=Object(n.useState)([]),p=Object(x.a)(d,2),f=p[0],h=p[1],g=Object(n.useState)(!0),b=Object(x.a)(g,2),E=b[0],w=b[1],y=Object(n.useState)(!1),j=Object(x.a)(y,2),C=j[0],k=j[1],S=Object(n.useState)(!1),T=Object(x.a)(S,2),_=T[0],D=T[1],I=Object(n.useState)(null),L=Object(x.a)(I,2),U=L[0],B=L[1],P=Object(n.useState)("00:00:00"),z=Object(x.a)(P,2),M=z[0],W=z[1],G=Object(n.useState)("popular"),V=Object(x.a)(G,2),F=V[0],H=V[1],Z=Object(O.useToasts)().addToast;Object(n.useEffect)((function(){document.title="Music | COVinfo",Y.a.firestore().collection("songs").get().then((function(e){var t=[];e.forEach((function(e){return t.push(e.data())})),h(q(t)),w(!1),k(!C)})).catch((function(e){console.log(e),Z("There was a problem loading the songs.",{appearance:"error",autoDismiss:!0})}))}),[]);var K=function(){var e=Object(ue.a)(ie.a.mark((function e(t){return ie.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:F!==t&&(H(t),h(q(f,t)),k(!C),Z("Filtering by ".concat(t,"."),{appearance:"success",autoDismiss:!0}));case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),q=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:F;switch(t){case"recent":e.sort((function(e,t){return A()(t.created_at)-A()(e.created_at)}));break;default:e.sort((function(e,t){return t.upvotes.length-e.upvotes.length}))}return e},Q=function(){""!==c.trim()?me(c).then((function(e){m(e),D(!0)})).catch((function(e){console.log(e),Z("There was a problem searching YouTube.",{appearance:"error",autoDismiss:!0})})):m([])},X=function(){var e=M.split(":"),t=parseInt(e[0]),a=parseInt(e[1]),n=parseInt(e[2]);return A.a.duration(t,"hours").asSeconds()+A.a.duration(a,"minutes").asSeconds()+n},$=function(){D(!1),W("00:00:00"),B(null),m([])};return r.a.createElement("div",{className:"w-100 h-100 d-flex flex-column"},r.a.createElement(we.a,{show:_,onHide:$},r.a.createElement(we.a.Header,{closeButton:!0},r.a.createElement(we.a.Title,null,"Suggest A Song")),r.a.createElement(we.a.Body,null,r.a.createElement("div",null,u.map((function(e){return r.a.createElement("button",{className:"w-100 border-0 ".concat(U&&e.id.videoId===U.id.videoId?"border-info":"bg-transparent"),onClick:function(){return B(e)}},r.a.createElement("div",{className:"d-flex flex flex-row align-items-center my-2"},r.a.createElement("img",{src:e.snippet.thumbnails.default.url,width:e.snippet.thumbnails.default.width*(2/3),height:e.snippet.thumbnails.default.height*(2/3),alt:"thumbnail"}),r.a.createElement("div",{className:"ml-2 text-left"},r.a.createElement("h5",{className:"mb-0 text-dark"},e.snippet.title.replace(/&#(\d+);/g,(function(e,t){return String.fromCharCode(t)}))),r.a.createElement("span",{className:"ml-2 h6 text-black-50"},e.snippet.channelTitle," \xb7",A()(e.snippet.publishedAt).fromNow()))))}))),r.a.createElement(J.a.Group,null,r.a.createElement(J.a.Label,null,"Timestamp"),r.a.createElement(Ne.a,{mask:"99:99:99",defaultValue:M,onChange:function(e){return W(e.target.value)}},(function(e){return r.a.createElement(J.a.Control,Object.assign({type:"text"},e))})))),r.a.createElement(we.a.Footer,null,r.a.createElement(ye.a,{variant:"primary",className:"d-flex flex-row align-items-center",onClick:function(){if(null!==U){var t={url:"https://youtube.com/watch?v=".concat(U.id.videoId),title:U.snippet.title,seconds:X(),created_at:A()().toISOString(),upvotes:[],user:e.user,song_id:""};Y.a.firestore().collection("songs").add(t).then((function(e){Y.a.firestore().collection("songs").doc(e.id).update({song_id:e.id}).then((function(){var a=f;a.push(Object(o.a)({},t,{song_id:e.id})),h(q(a)),l(""),$(),Z("Song added.",{appearance:"success",autoDismiss:!0})})).catch((function(e){console.log(e),Z("There was a problem adding the song.",{appearance:"error",autoDismiss:!0})}))})).catch((function(e){console.log(e),Z("There was a problem adding the song.",{appearance:"error",autoDismiss:!0})}))}}},r.a.createElement(fe.a,{className:"mr-1"})," Suggest Song"))),r.a.createElement("div",{className:"w-100 px-3 mt-3"},r.a.createElement("h3",null,"Hand Washing Music"),r.a.createElement("div",{className:"w-100 d-flex flex-row rounded-pill messageInputContainer"},r.a.createElement("input",{type:"text",className:"flex bg-transparent border-0 py-2 px-3 messageInput",placeholder:e.authed?"Add song from YouTube...":"Login to enable adding songs...",onChange:function(e){return l(e.target.value)},disabled:!e.authed,onKeyDown:function(e){13===e.keyCode&&Q()},value:c}),""!==c.trim()?r.a.createElement("button",{className:"bg-primary border-0 d-flex align-items-center justify-content-center pl-3 pr-4",style:{borderTopRightRadius:100,borderBottomRightRadius:100},onClick:Q},r.a.createElement(he.a,{color:"white"})):r.a.createElement("div",null))),E?r.a.createElement("div",{className:"d-flex align-items-center justify-content-center w-100 flex"},r.a.createElement(v,{color:"lime",size:100,className:"spinning-logo"})):r.a.createElement("div",{className:"h-100 p-3"},r.a.createElement(xe.a,{className:"mb-3 d-flex justify-content-end"},r.a.createElement(xe.a.Toggle,{variant:"light"},"Filter ",r.a.createElement(ge.a,null)),r.a.createElement(xe.a.Menu,null,r.a.createElement(xe.a.Item,{onClick:function(){return K("popular")},style:{backgroundColor:"popular"===F?"lightgray":"white"}},r.a.createElement("div",{className:"d-flex flex-row align-items-center"},r.a.createElement("span",{className:"flex"},"Popular")," ",r.a.createElement(be.a,null))),r.a.createElement(xe.a.Item,{onClick:function(){return K("recent")},style:{backgroundColor:"recent"===F?"lightgray":"white"}},r.a.createElement("div",{className:"d-flex flex-row align-items-center"},r.a.createElement("span",{className:"flex"},"Recent")," ",r.a.createElement(Ee.a,null))))),r.a.createElement(R.Scrollbars,{hideTracksWhenNotNeeded:!0,renderView:function(e){return r.a.createElement("div",e)}},f.map((function(t){return r.a.createElement("div",{className:"border d-inline-block m-1",style:{borderRadius:10,borderColor:"lightgray"},key:t.song_id},r.a.createElement(pe.a,{url:"".concat(t.url,"&t=").concat(t.seconds),controls:!1,className:"m-2",width:2/3*640-30,height:210}),r.a.createElement("div",{style:{height:1,width:"100%",backgroundColor:"lightgray"}}),r.a.createElement("div",{className:"p-2 d-flex flex-row align-items-center"},r.a.createElement("div",{className:"flex"},r.a.createElement("span",null,"Submitted by: "),r.a.createElement("span",{style:{color:"#".concat(t.user.username_color)}},t.user.username),r.a.createElement(N.a,{countryCode:t.user.country,className:"ml-1"})),r.a.createElement("div",{className:"d-flex flex-row align-items-center"},e.authed&&"admin"===e.user.type?r.a.createElement("button",{className:"bg-transparent border-0",onClick:function(){return e=t.song_id,void(window.confirm("Are you sure you want to delete that song?")&&Y.a.firestore().collection("songs").doc(e).delete().then((function(){h(q(f.filter((function(t){return t.song_id!==e})))),k(!C),Z("The song was deleted.",{appearance:"success",autoDismiss:!0})})).catch((function(e){console.log(e),Z("There was a problem deleting the song.",{appearance:"error",autoDismiss:!0})})));var e}},r.a.createElement(ve.a,{className:"text-danger"})):null,r.a.createElement("span",null,"(",t.upvotes.length,")"),r.a.createElement("button",{className:"bg-transparent border-0",onClick:function(){return function(t){var a=f.findIndex((function(e){return e.song_id===t})),n=f[a].upvotes;n.includes(e.user.user_id)?n=n.filter((function(t){return t!==e.user.user_id})):n.push(e.user.user_id);var r=f;r[a]=Object(o.a)({},r[a],{upvotes:n}),Y.a.firestore().collection("songs").doc(t).update({upvotes:n}).then((function(){h(q(r)),k(!C),Z("Upvote toggled.",{appearance:"success",autoDismiss:!0})})).catch((function(e){console.log(e),Z("There was a problem toggling the upvote.",{appearance:"error",autoDismiss:!0})}))}(t.song_id)},disabled:!e.authed,title:e.authed?null:"Login to enable upvoting"},r.a.createElement(be.a,{color:e.authed&&t.upvotes.includes(e.user.user_id)?"gold":"black"})))))})))))})),Ce=a(571),ke=a(270),Se=a(266),Te=a.n(Se);var _e=Object(E.b)((function(e,t){return Object(o.a)({},t,{user:e.user,authed:e.authed})}))((function(e){var t=Object(n.useState)([]),a=Object(x.a)(t,2),c=a[0],l=a[1],s=Object(n.useState)(!0),i=Object(x.a)(s,2),u=i[0],m=i[1],d=Object(n.useState)(!1),p=Object(x.a)(d,2),h=p[0],g=p[1],b=Object(n.useState)(!1),E=Object(x.a)(b,2),w=E[0],y=E[1],j=Object(n.useState)(r.a.createElement(f.a,{size:100})),C=Object(x.a)(j,2),k=C[0],S=C[1],T=Object(n.useState)(!1),_=Object(x.a)(T,2),D=_[0],I=_[1],L=Object(n.useState)(null),U=Object(x.a)(L,2),B=U[0],P=U[1],z=Object(n.useState)("popular"),M=Object(x.a)(z,2),W=M[0],G=M[1],V=Object(n.useState)(0),F=Object(x.a)(V,2),H=F[0],Z=F[1],K=Object(n.useState)(!1),q=Object(x.a)(K,2),J=q[0],Q=q[1],X=Object(n.useRef)(null),$=Object(O.useToasts)().addToast;Object(n.useEffect)((function(){Y.a.firestore().collection("memes").get().then((function(e){var t=[];e.forEach((function(e){return t.push(e.data())})),l(te(t)),m(!1),g(!h)})).catch((function(e){console.log(e),$("There was a problem loading the memes.",{appearance:"error",autoDismiss:!0})}))}),[]);var ee=function(){var e=Object(ue.a)(ie.a.mark((function e(t){return ie.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:W!==t&&(G(t),l(te(c,t)),g(!h),$("Filtering by ".concat(t,"."),{appearance:"success",autoDismiss:!0}));case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),te=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:W;switch(t){case"recent":e.sort((function(e,t){return A()(t.created_at)-A()(e.created_at)}));break;default:e.sort((function(e,t){return t.upvotes.length-e.upvotes.length}))}return e},ae=function(){y(!1),P(null)};return r.a.createElement("div",{className:"w-100 h-100 d-flex flex-column",ref:X},r.a.createElement(we.a,{show:w,onHide:ae},r.a.createElement(we.a.Header,{closeButton:!0},r.a.createElement(we.a.Title,null,"Upload a Meme")),r.a.createElement(we.a.Body,{className:"d-flex flex-column align-items-center"},B?r.a.createElement("button",{className:"bg-transparent border-0 position-relative",onMouseEnter:function(){return I(!0)},onMouseLeave:function(){return I(!1)},onClick:function(){return P(null)}},r.a.createElement("img",{src:URL.createObjectURL(B),alt:"memeToUpload",style:{borderRadius:5}}),D?r.a.createElement("div",{className:"position-absolute d-flex flex-row align-items-center justify-content-center",style:{left:0,top:0,bottom:0,right:0,backgroundColor:"rgba(255, 255, 255, 0.4)"}},r.a.createElement(ve.a,{className:"text-danger",size:50})):r.a.createElement("div",null)):r.a.createElement(ke.a,{onDrop:function(e){return P(e[0])}},(function(e){var t=e.getRootProps,a=e.getInputProps;return(r.a.createElement("section",null,r.a.createElement("div",t({className:"dropzone",onMouseEnter:function(){return S(r.a.createElement(fe.a,{size:100}))},onMouseLeave:function(){return S(r.a.createElement(f.a,{size:100}))}}),r.a.createElement("input",a({multiple:!1,accept:"image/png, image/jpeg, image/gif"})),k,r.a.createElement("span",null,"Drag 'n' drop some files here, or click to select files"))))})),J?r.a.createElement(Ce.a,{now:H,label:"".concat(H,"%"),className:"w-100 mt-2"}):null),r.a.createElement(we.a.Footer,null,r.a.createElement(ye.a,{variant:"primary",className:"d-flex flex-row align-items-center",onClick:function(){if(B){Q(!0);var t={url:"",created_at:"",upvotes:[],user:e.user,meme_id:""};Y.a.firestore().collection("memes").add(t).then((function(e){t.meme_id=e.id,Y.a.storage().ref("images/".concat(t.meme_id)).put(B).on("state_changed",(function(e){var t=Math.round(e.bytesTransferred/e.totalBytes*100);Z(t)}),(function(e){console.log(e),$("There was a problem adding the meme.",{appearance:"error",autoDismiss:!0})}),(function(){Y.a.storage().ref("images").child(t.meme_id).getDownloadURL().then((function(e){t.url=e,t.created_at=A()().toISOString(),Y.a.firestore().collection("memes").doc(t.meme_id).update(t).then((function(){var e=c;e.push(t),l(te(e)),Q(!1),ae(),$("Meme added.",{appearance:"success",autoDismiss:!0})})).catch((function(e){console.log(e),$("There was a problem adding the meme.",{appearance:"error",autoDismiss:!0})}))})).catch((function(e){console.log(e),$("There was a problem adding the meme.",{appearance:"error",autoDismiss:!0})}))}))})).catch((function(e){console.log(e),$("There was a problem adding the meme.",{appearance:"error",autoDismiss:!0})}))}}},r.a.createElement(fe.a,{className:"mr-1"})," Upload Meme"))),r.a.createElement("h3",{className:"px-3 pt-3"},"Coronavirus Memes"),r.a.createElement("div",{className:"d-flex flex-row align-items-center justify-content-between mb-3 px-3"},r.a.createElement(ye.a,{variant:"success",onClick:function(){return y(!0)},disabled:!e.authed},e.authed?"+ Add Meme":"Login to add memes"),r.a.createElement(xe.a,null,r.a.createElement(xe.a.Toggle,{variant:"light"},"Filter ",r.a.createElement(ge.a,null)),r.a.createElement(xe.a.Menu,null,r.a.createElement(xe.a.Item,{onClick:function(){return ee("popular")},style:{backgroundColor:"popular"===W?"lightgray":"white"}},r.a.createElement("div",{className:"d-flex flex-row align-items-center"},r.a.createElement("span",{className:"flex"},"Popular")," ",r.a.createElement(be.a,null))),r.a.createElement(xe.a.Item,{onClick:function(){return ee("recent")},style:{backgroundColor:"recent"===W?"lightgray":"white"}},r.a.createElement("div",{className:"d-flex flex-row align-items-center"},r.a.createElement("span",{className:"flex"},"Recent")," ",r.a.createElement(Ee.a,null)))))),u?r.a.createElement("div",{className:"d-flex align-items-center justify-content-center w-100 flex"},r.a.createElement(v,{color:"lime",size:100,className:"spinning-logo"})):r.a.createElement("div",{className:"flex p-3"},r.a.createElement(R.Scrollbars,{hideTracksWhenNotNeeded:!0,renderView:function(e){return r.a.createElement("div",e)}},r.a.createElement(Te.a,{className:"pb-5"},c.map((function(t){return r.a.createElement("div",{className:"border d-inline-block m-1",style:{borderRadius:10,borderColor:"lightgray",width:X.current?X.current.offsetWidth/4+30:0},key:t.meme_id},r.a.createElement("img",{src:t.url,alt:t.meme_id,className:"w-100 p-2"}),r.a.createElement("div",{style:{height:1,width:"100%",backgroundColor:"lightgray"}}),r.a.createElement("div",{className:"p-2 d-flex flex-row align-items-center"},r.a.createElement("div",{className:"flex"},r.a.createElement("span",null,"Submitted by: "),r.a.createElement("span",{style:{color:"#".concat(t.user.username_color)}},t.user.username),r.a.createElement(N.a,{countryCode:t.user.country,className:"ml-1"})),r.a.createElement("div",{className:"d-flex flex-row align-items-center"},e.authed&&"admin"===e.user.type?r.a.createElement("button",{className:"bg-transparent border-0",onClick:function(){return e=t.meme_id,void(window.confirm("Are you sure you want to delete that meme?")&&Y.a.firestore().collection("memes").doc(e).delete().then((function(){Y.a.storage().ref("images/".concat(e)).delete().then((function(){l(te(c.filter((function(t){return t.meme_id!==e})))),g(!h),$("The meme was deleted.",{appearance:"success",autoDismiss:!0})})).catch((function(e){console.log(e),$("There was a problem deleting the meme.",{appearance:"error",autoDismiss:!0})}))})).catch((function(e){console.log(e),$("There was a problem deleting the meme.",{appearance:"error",autoDismiss:!0})})));var e}},r.a.createElement(ve.a,{className:"text-danger"})):null,r.a.createElement("span",null,"(",t.upvotes.length,")"),r.a.createElement("button",{className:"bg-transparent border-0",onClick:function(){return function(t){var a=c.findIndex((function(e){return e.meme_id===t})),n=c[a].upvotes;n.includes(e.user.user_id)?n=n.filter((function(t){return t!==e.user.user_id})):n.push(e.user.user_id);var r=c;r[a]=Object(o.a)({},r[a],{upvotes:n}),Y.a.firestore().collection("memes").doc(t).update({upvotes:n}).then((function(){l(te(r)),g(!h),$("Upvote toggled.",{appearance:"success",autoDismiss:!0})})).catch((function(e){console.log(e),$("There was a problem toggling the upvote.",{appearance:"error",autoDismiss:!0})}))}(t.meme_id)},disabled:!e.authed,title:e.authed?null:"Login to enable upvoting"},r.a.createElement(be.a,{color:e.authed&&t.upvotes.includes(e.user.user_id)?"gold":"black"})))))}))))))}));var De=function(){return r.a.createElement(E.a,{store:te},r.a.createElement(O.ToastProvider,{autoDismissTimeout:3e3},r.a.createElement(b.a,null,r.a.createElement("div",{className:"d-flex flex-row h-100"},r.a.createElement(w,null),r.a.createElement(y.c,null,r.a.createElement(y.a,{path:"/map"},r.a.createElement(S,null)),r.a.createElement(y.a,{path:"/chat"},r.a.createElement(H,null)),r.a.createElement(y.a,{path:"/music"},r.a.createElement(Oe,null)),r.a.createElement(y.a,{path:"/memes"},r.a.createElement(_e,null)),r.a.createElement(y.a,{path:"/login"},r.a.createElement(Q,null)),r.a.createElement(y.a,{path:"/register"},r.a.createElement(re,null)),r.a.createElement(y.a,{path:"/settings"},r.a.createElement(oe,null)),r.a.createElement(y.a,{path:"/"},r.a.createElement(z,null)))))))};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));var Ie=a(267),Le=a.n(Ie),Ae=a(86),Ue=a.n(Ae);a(542),a(543),a(544),a(545),a(546);Le.a.setApiKey("AIzaSyCBuW_IWsZ1biICjlWto_ySrSBiH8e0ZkA"),Ue.a.initializeApp({apiKey:"AIzaSyCBuW_IWsZ1biICjlWto_ySrSBiH8e0ZkA",authDomain:"covinfo.firebaseapp.com",databaseURL:"https://covinfo.firebaseio.com",projectId:"covinfo",storageBucket:"covinfo.appspot.com",messagingSenderId:"174794034863",appId:"1:174794034863:web:a865952aec9b1154d6ce5a",measurementId:"G-G84RNWQM40"}),Ue.a.analytics(),Ue.a.performance(),Ue.a.auth().onAuthStateChanged((function(e){e?Ue.a.firestore().collection("users").doc(e.uid).get().then((function(e){te.dispatch({type:"UPDATE_USER",user:e.data()})})).catch((function(e){console.log(e)})):te.dispatch({type:"CLEAR_USER"})})),l.a.render(r.a.createElement(r.a.StrictMode,null,r.a.createElement(De,null)),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))}},[[276,1,2]]]);
//# sourceMappingURL=main.6866d138.chunk.js.map