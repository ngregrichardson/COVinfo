(this.webpackJsonpCOVinfo=this.webpackJsonpCOVinfo||[]).push([[0],{276:function(e,t,a){e.exports=a(547)},281:function(e,t,a){},337:function(e,t){},547:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),l=a(28),c=a.n(l),o=(a(183),a(281),a(17)),s=a(10),i=a(575),u=a(272),m=a(572),d=a(551),p=a(552),f=a(553),h=a(554),g=a(555),b=a(556),E=a(557),v=a(37),y=a(25),w=function(e){var t=e.style,a=void 0===t?{}:t,n=e.color,l=void 0===n?"black":n,c=e.className,o=void 0===c?"":c,s=e.size,i=void 0===s?100:s;return(r.a.createElement("svg",{version:"1.1",viewBox:"0 0 64 64",xmlns:"http://www.w3.org/2000/svg",style:a,fill:l,className:o,height:i,width:i},r.a.createElement("path",{d:" c-1.2-0.8-2.4,0.1-3.2,0.7c-0.1,0.1-0.3,0.2-0.4,0.3c0-0.2,0-0.4,0-0.5c0-0.9-0.1-2.5-1.6-2.9c-1.4-0.3-2.2,1-2.8,1.8  c-0.1,0.1-0.2,0.3-0.3,0.4c-0.1-0.2-0.1-0.3-0.2-0.5c-0.4-0.9-0.9-2.3-2.5-2.2c-1.5,0.2-1.8,1.7-2,2.6c0,0.1-0.1,0.3-0.1,0.5  c-0.1-0.1-0.2-0.3-0.3-0.4c-0.7-0.8-1.7-1.9-3.1-1.3c-1.3,0.7-1.1,2.2-1,3.2c0,0.2,0.1,0.4,0.1,0.6c-0.2-0.1-0.3-0.2-0.5-0.2  c-0.8-0.4-2.3-1.2-3.4-0.1c-1,1.1-0.3,2.4,0.2,3.3c0.1,0.2,0.2,0.5,0.3,0.7c-0.2,0-0.5,0-0.7,0c-1-0.1-2.6-0.2-3.2,1.3  c-0.2,0.5,0,1.1,0.5,1.3c0.5,0.2,1.1,0,1.3-0.5c0.1-0.2,0.8-0.1,1.2-0.1c0.9,0.1,2,0.1,2.6-0.8c0.6-0.9,0.1-2-0.3-2.8  c-0.1-0.3-0.4-0.8-0.4-1c0.2,0,0.7,0.3,1,0.4c0.8,0.4,1.8,0.9,2.7,0.3c0.9-0.6,0.8-1.8,0.6-2.7c0-0.3-0.1-0.8-0.1-1  c0.2,0.2,0.5,0.5,0.7,0.7c0.6,0.7,1.4,1.5,2.4,1.2c1.1-0.3,1.3-1.4,1.5-2.3c0.1-0.3,0.2-0.7,0.2-0.9c0.1,0.2,0.3,0.6,0.4,0.9  c0.3,0.9,0.8,1.9,1.8,2c1.1,0.1,1.7-0.9,2.2-1.6c0.1-0.2,0.4-0.6,0.5-0.8c0.1,0.3,0.1,0.7,0.1,1c0,0.9,0.1,2.1,1.1,2.5  c1,0.5,1.9-0.2,2.6-0.8c0.2-0.2,0.6-0.5,0.8-0.6c0,0.3-0.2,0.7-0.3,1c-0.3,0.9-0.6,2,0.1,2.7c0.8,0.8,1.9,0.5,2.7,0.3  c0.3-0.1,1-0.3,1.1-0.3c0,0.2-0.4,0.7-0.6,1c-0.5,0.7-1.3,1.7-0.8,2.7c0.2,0.4,0.5,0.6,0.9,0.6c0.1,0,0.3,0,0.4-0.1  c0.5-0.2,0.7-0.7,0.5-1.2c0.1-0.2,0.3-0.6,0.5-0.8C46.1,29.1,47,27.9,46.2,26.6z"}),r.a.createElement("path",{d:"M56.9,42.9c-1.1-0.7-2.5-0.5-3.4,0.3l-2.8-1.6c1-2,1.7-4.1,2.1-6.4l4,0.4l0.2-2l-4-0.4c0-0.4,0.1-0.8,0.1-1.2  s0-0.8-0.1-1.2l4-0.4l-0.2-2l-4,0.4c-0.3-2.3-1.1-4.4-2.1-6.4l2.8-1.6c0.9,0.8,2.3,1,3.4,0.3c1.4-0.8,1.9-2.7,1.1-4.1  s-2.7-1.9-4.1-1.1c-1.1,0.7-1.7,1.9-1.4,3.1l-2.8,1.6c-1.2-1.9-2.8-3.6-4.5-5l2.4-3.3l-1.6-1.2l-2.4,3.3c-0.7-0.4-1.4-0.8-2.1-1.2  l1.6-3.7l-1.8-0.8l-1.6,3.7c-2.1-0.8-4.3-1.3-6.6-1.4V7.8c1.2-0.4,2-1.5,2-2.8c0-1.7-1.3-3-3-3s-3,1.3-3,3c0,1.3,0.8,2.4,2,2.8v3.2  c-2.3,0.1-4.5,0.6-6.6,1.4l-1.6-3.7l-1.8,0.8l1.6,3.7c-0.7,0.4-1.4,0.8-2.1,1.2l-2.4-3.3l-1.6,1.2l2.4,3.3c-1.8,1.4-3.3,3.1-4.5,5  L11.6,19c0.2-1.2-0.3-2.5-1.4-3.1C8.7,15.1,6.8,15.6,6,17s-0.3,3.3,1.1,4.1c1.1,0.7,2.5,0.5,3.4-0.3l2.8,1.6c-1,2-1.7,4.1-2.1,6.4  l-4-0.4l-0.2,2l4,0.4c0,0.4-0.1,0.8-0.1,1.2s0,0.8,0.1,1.2l-4,0.4l0.2,2l4-0.4c0.3,2.3,1.1,4.4,2.1,6.4l-2.8,1.6  c-0.9-0.8-2.3-1-3.4-0.3C5.7,43.7,5.2,45.6,6,47s2.7,1.9,4.1,1.1c1.1-0.7,1.7-1.9,1.4-3.1l2.8-1.6c1.2,1.9,2.8,3.6,4.5,5l-2.4,3.3  l1.6,1.2l2.4-3.3c0.7,0.4,1.4,0.8,2.1,1.2l-1.6,3.7l1.8,0.8l1.6-3.7c2.1,0.8,4.3,1.3,6.6,1.4v3.2c-1.2,0.4-2,1.5-2,2.8  c0,1.7,1.3,3,3,3s3-1.3,3-3c0-1.3-0.8-2.4-2-2.8v-3.2c2.3-0.1,4.5-0.6,6.6-1.4l1.6,3.7l1.8-0.8l-1.6-3.7c0.7-0.4,1.4-0.8,2.1-1.2  l2.4,3.3l1.6-1.2l-2.4-3.3c1.8-1.4,3.3-3.1,4.5-5l2.8,1.6c-0.2,1.2,0.3,2.5,1.4,3.1c1.4,0.8,3.3,0.3,4.1-1.1S58.3,43.7,56.9,42.9z   M44,46.8l-1.2-1.6l-1.6,1.2l1.2,1.6c-0.6,0.4-1.1,0.7-1.7,1l-0.8-1.8L38,47.9l0.8,1.8C37,50.4,35,50.8,33,50.9V49h-2v1.9  c-2-0.1-4-0.5-5.8-1.2l0.8-1.8l-1.8-0.8l-0.8,1.8c-0.6-0.3-1.2-0.6-1.7-1l1.2-1.6l-1.6-1.2L20,46.8c-1.5-1.3-2.9-2.7-4-4.4l1.7-1  l-1-1.7l-1.7,1c-0.9-1.7-1.5-3.6-1.8-5.6l1.9-0.2l-0.2-2L13.1,33c0-0.3-0.1-0.7-0.1-1s0-0.7,0.1-1l1.9,0.2l0.2-2L13.3,29  c0.3-2,0.9-3.9,1.8-5.6l1.7,1l1-1.7l-1.7-1c1.1-1.7,2.4-3.2,4-4.4l1.2,1.6l1.6-1.2l-1.2-1.6c0.6-0.4,1.1-0.7,1.7-1l0.8,1.8l1.8-0.8  l-0.8-1.8c1.8-0.7,3.8-1.1,5.8-1.2V15h2v-1.9c2,0.1,4,0.5,5.8,1.2L38,16.1l1.8,0.8l0.8-1.8c0.6,0.3,1.2,0.6,1.7,1l-1.2,1.6l1.6,1.2  l1.2-1.6c1.5,1.3,2.9,2.7,4,4.4l-1.7,1l1,1.7l1.7-1c0.9,1.7,1.5,3.6,1.8,5.6l-1.9,0.2l0.2,2l1.9-0.2c0,0.3,0.1,0.7,0.1,1  s0,0.7-0.1,1L49,32.8l-0.2,2l1.9,0.2c-0.3,2-0.9,3.9-1.8,5.6l-1.7-1l-1,1.7l1.7,1C46.8,44,45.5,45.5,44,46.8z"}),r.a.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",width:"50%",height:"50%",x:"25%",y:"25%",viewBox:"0 0 24 24",fill:"none",stroke:l,strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},r.a.createElement("circle",{cx:"12",cy:"12",r:"10"}),r.a.createElement("line",{x1:"12",y1:"16",x2:"12",y2:"12"}),r.a.createElement("line",{x1:"12",y1:"8",x2:"12.01",y2:"8"}))))};var x=Object(y.b)((function(e,t){return Object(o.a)({},t,{user:e.user,authed:e.authed})}))((function(e){var t=Object(n.useState)(!1),a=Object(s.a)(t,2),l=a[0],c=a[1];return(r.a.createElement(r.a.Fragment,null,r.a.createElement(i.a,{bg:"dark",className:"flex-column p-0"},r.a.createElement(i.a.Brand,{className:"mr-0 text-white h6 px-3 d-flex flex-column align-items-center bg-transparent border-0 hover-spinner",as:"Button",onClick:function(){return c(!0)}},r.a.createElement(w,{color:"lime",size:50}),"COVinfo"),r.a.createElement(i.a.Collapse,{id:"basic-navbar-nav",className:"flex-column w-100"},r.a.createElement(u.a,{className:"flex-column w-100 flex"},r.a.createElement(v.b,{to:"/",exact:!0,activeClassName:"current",className:"text-center py-3 w-100 nav-item"},r.a.createElement(d.a,{size:35})),r.a.createElement(v.b,{to:"/map",activeClassName:"current",className:"text-center py-3 w-100 nav-item"},r.a.createElement(p.a,{size:35})),r.a.createElement(v.b,{to:"/chat",activeClassName:"current",className:"text-center py-3 w-100 nav-item"},r.a.createElement(f.a,{size:35})),r.a.createElement(v.b,{to:"/music",activeClassName:"current",className:"text-center py-3 w-100 nav-item"},r.a.createElement(h.a,{size:35})),r.a.createElement(v.b,{to:"/memes",activeClassName:"current",className:"text-center py-3 w-100 nav-item"},r.a.createElement(g.a,{size:35})),r.a.createElement("div",{className:"flex"}),e.authed?r.a.createElement(v.b,{to:"/settings",activeClassName:"current",className:"text-center py-3 w-100 nav-item"},r.a.createElement(b.a,{size:35})):r.a.createElement(v.b,{to:"/login",activeClassName:"current",className:"text-center py-3 w-100 nav-item"},r.a.createElement(E.a,{size:35}))))),r.a.createElement(m.a,{show:l,onHide:function(){return c(!1)}},r.a.createElement(m.a.Header,{closeButton:!0},r.a.createElement(m.a.Title,null,"About COVinfo")),r.a.createElement(m.a.Body,null,"COVinfo was designed and built during the 2020 Corona pandemic and an entry in"," ",r.a.createElement("a",{href:"https://hackquarantine.devpost.com/",target:"_blank",rel:"noopener noreferrer"},"Hack Quarantine"),". The goal of COVinfo is to provide a one-stop-shop dashboard for important information regarding Corona, whether that includes up-to-date news, globally and locally, a visual representation of the global spread of Corona, or some materials to keep you distracted and staying healthy during these difficult times. COVinfo was built by"," ",r.a.createElement("a",{href:"https://ngregrichardson.dev",target:"_blank",rel:"noopener noreferrer"},"Noah Richardson")," ","and"," ",r.a.createElement("a",{href:"http://mayajohn.info",target:"_blank",rel:"noopener noreferrer"},"Maya John")," ","and is completely open sourced on"," ",r.a.createElement("a",{href:"https://github.com/ngregrichardson/COVinfo",target:"_blank",rel:"noopener noreferrer"},"Github"),"."),r.a.createElement(m.a.Body,null,r.a.createElement("strong",null,"Built with:"),r.a.createElement("br",null),"Front-End:"," ",r.a.createElement("a",{href:"https://reactjs.org/",target:"_blank",rel:"noopener noreferrer"},"React"),r.a.createElement("br",null),"Back-End:"," ",r.a.createElement("a",{href:"https://expressjs.com/",target:"_blank",rel:"noopener noreferrer"},"Express"),r.a.createElement("br",null),"Maps:"," ",r.a.createElement("a",{href:"https://www.mapbox.com/",target:"_blank",rel:"noopener noreferrer"},"Mapbox"),r.a.createElement("br",null),"Data Sources:"," ",r.a.createElement("a",{href:"https://newsapi.org/",target:"_blank",rel:"noopener noreferrer"},"News API"),","," ",r.a.createElement("a",{href:"https://corona.lmao.ninja/",target:"_blank",rel:"noopener noreferrer"},"NovelCOVID"),","," ",r.a.createElement("a",{href:"https://datahub.io/core/geo-countries",target:"_blank",rel:"noopener noreferrer"},"DataHub")))))})),j=a(62),N=a(142),O=a(55),C=a(24),k={id:"data",type:"fill",paint:{"fill-color":{property:"cases",stops:[[0,"#abdda4"],[10,"#e6f598"],[100,"#ffffbf"],[1e3,"#fee08b"],[1e4,"#fdae61"],[1e5,"#f46d43"],[1e6,"#d53e4f"]]},"fill-opacity":.8}};function S(e){return e.toString().replace(/\B(?=(\d{3})+(?!\d))/g,",")}var _=Object(y.b)((function(e,t){return Object(o.a)({},t,{user:e.user,authed:e.authed})}))((function(e){var t=Object(n.useState)({width:"100%",height:"100%",latitude:39.9526,longitude:-75.1652,zoom:5}),a=Object(s.a)(t,2),l=a[0],c=a[1],i=Object(n.useState)(null),u=Object(s.a)(i,2),m=u[0],d=u[1],p=Object(n.useState)(null),f=Object(s.a)(p,2),h=f[0],g=f[1],b=Object(n.useState)(!0),E=Object(s.a)(b,2),v=E[0],y=E[1],x=Object(C.useToasts)().addToast;return Object(n.useEffect)((function(){document.title="Map | COVinfo",fetch("https://covinfo.tech/mapData").then((function(e){return e.json()})).then((function(t){var a=t.geoJson;t.coronaJson.forEach((function(t){var n=a.features.find((function(e){return e.properties.ISO_A3===t.countryInfo.iso3}));n&&(n.properties=Object(o.a)({},n.properties,{cases:t.cases,deaths:t.deaths,recovered:t.recovered,casesToday:t.todayCases,tests:t.tests,iso2:t.countryInfo.iso2}),e.authed&&e.user&&(e.user.country!==t.countryInfo.iso2&&e.user.country!==t.countryInfo.iso3||c(Object(o.a)({},l,{latitude:t.countryInfo.lat,longitude:t.countryInfo.long}))))})),d(a),setTimeout((function(){return y(!1)}),1e3)})).catch((function(e){console.log(e),y(!1),x("There was a problem loading the data",{appearance:"error",autoDismiss:!0})}))}),[]),r.a.createElement("div",{style:{flex:1,position:"relative"}},v?r.a.createElement("div",{className:"map-loading"},r.a.createElement(w,{color:"lime",size:100,className:"spinning-logo"})):null,r.a.createElement(N.c,Object.assign({mapboxApiAccessToken:"pk.eyJ1IjoibmdyZWdyaWNoYXJkc29uIiwiYSI6ImNrOHY0dGdsdjA2NjYzZnNmMWVzZW53OGQifQ.OLl9xQNCBOTHwVRlz-06lA"},l,{onViewportChange:c,mapStyle:"mapbox://styles/mapbox/dark-v9",onHover:function(e){var t=e.features,a=t&&t.find((function(e){return"data"===e.layer.id}));g(a)}}),r.a.createElement(N.b,{type:"geojson",data:m},r.a.createElement(N.a,k)),h?r.a.createElement("div",{className:"map-tooltip"},r.a.createElement("div",{className:"d-flex flex-row align-items-center"},r.a.createElement("div",{className:"font-weight-bold"},h.properties.ADMIN),h.properties.iso2?r.a.createElement(O.a,{countryCode:h.properties.iso2,className:"ml-1"}):null),r.a.createElement("div",{style:{width:"100%",height:1,backgroundColor:"#fff"}}),void 0!==h.properties.cases?r.a.createElement("div",null,"Total Cases: ",S(h.properties.cases)):null,void 0!==h.properties.deaths?r.a.createElement("div",null,"Deaths: ",S(h.properties.deaths)):null,void 0!==h.properties.recovered?r.a.createElement("div",null,"Recoveries: ",S(h.properties.recovered)):null,void 0!==h.properties.tests?r.a.createElement("div",null,"Tests: ",S(h.properties.tests)):null,void 0===h.properties.casesToday||0===h.properties.casesToday?null:r.a.createElement("div",null,"Cases Today:"," ",S(h.properties.casesToday)),r.a.createElement("div",{style:{fontSize:"1em"}},"Data Provided by"," ",r.a.createElement("a",{href:"https://github.com/NovelCOVID/API",target:"_blank",rel:"noopener noreferrer"},"NovelCOVID"))):null))})),T=a(253),D=a(254),I=a(269),L=a(273),A=a(29),U=a.n(A);var R=function(e){var t=Object(n.useState)(e.article),a=Object(s.a)(t,1)[0];return r.a.createElement("button",{className:"p-2 text-white d-flex flex-row align-items-center mb-3 text-left w-100 bg-transparent border newsStory",style:{borderRadius:10,borderColor:"lightgray"},onClick:function(){window.open(a.url,"_blank")}},r.a.createElement("img",{src:a.urlToImage||"https://designshack.net/wp-content/uploads/placeholder-image.png",width:70,height:70,style:{borderRadius:5,objectFit:"cover"},alt:"article_img"}),r.a.createElement("div",{className:"d-flex flex-column justify-content-center ml-3"},r.a.createElement("h5",{className:"mb-0 text-dark"},a.title),r.a.createElement("span",{className:"ml-2 h6 text-black-50"},a.source.name," \xb7",a.author&&""!==a.author.trim()?" ".concat(a.author," \xb7 "):" ",U()(a.publishedAt).fromNow())))},B=a(57),P=a(83),z=function(e){Object(L.a)(a,e);var t=Object(I.a)(a);function a(){var e;Object(T.a)(this,a);for(var n=arguments.length,r=new Array(n),l=0;l<n;l++)r[l]=arguments[l];return(e=t.call.apply(t,[this].concat(r))).state={global:{articles:[],loading:!0},local:{articles:[],loading:!0,title:"Local Coronavirus News"},coords:{latitude:null,longitude:null}},e.getLocalNews=function(){if(e.props.authed&&e.props.user){var t=e.props.user;e.handleGetNews(t.country).then((function(a){e.setState({local:{articles:a,loading:!1,title:"Local Coronavirus News (".concat(t.country,")"),country:t.country}})}))}else e.handleGetNews("United States of America").then((function(t){e.setState({local:{articles:t,loading:!1,title:"Local Coronavirus News (US)"}})}))},e.handleGetNews=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";return new Promise((function(t,a){e=" "+Object(P.getName)(e),fetch("https://newsapi.org/v2/everything?q=coronavirus".concat(e,"&from=").concat(U()().subtract(14,"days").format("YYYY-MM-DD"),"&sortBy=relevancy&language=en&apiKey=a24bf4b7cea34b6c88e899238f856cfa")).then((function(e){return e.json()})).then((function(e){"error"!==e.status?t(e.articles):a("There was a problem getting the news.")})).catch((function(e){a("There was a problem getting the news.")}))}))},e}return Object(D.a)(a,[{key:"componentDidUpdate",value:function(e){var t=this.props;e.authed!==t.authed&&(this.setState({local:Object(o.a)({},this.state.local,{loading:!0})}),this.getLocalNews())}},{key:"componentDidMount",value:function(){var e=this;document.title="Dashboard | COVinfo",this.handleGetNews().then((function(t){e.setState({global:{articles:t,loading:!1}})})),this.getLocalNews()}},{key:"render",value:function(){var e=this.state,t=e.global,a=e.local;return(r.a.createElement("div",{className:"d-flex flex-column flex p-3"},r.a.createElement("div",{className:"d-flex flex-row"},r.a.createElement("h3",{className:"flex ml-2"},"Global Coronavirus News"),r.a.createElement("div",{className:"flex ml-2 d-flex flex-row align-items-center mb-2"},r.a.createElement("h3",{className:"m-0"},a.title),r.a.createElement(O.a,{countryCode:a.country||"US",className:"ml-1"}))),r.a.createElement("div",{className:"d-flex flex-row flex"},r.a.createElement("div",{className:"p-1 flex d-flex flex-column align-items-center ".concat(a.loading?"justify-content-center":"")},r.a.createElement(B.Scrollbars,{renderView:function(e){return r.a.createElement("div",Object.assign({},e,{className:"pr-3 flex d-flex flex-column align-items-center ".concat(t.loading?"justify-content-center":"")}))}},t.loading?r.a.createElement(w,{color:"lime",size:100,className:"spinning-logo"}):this.state.global.articles.map((function(e){return e.title&&""!==e.title.trim()?r.a.createElement(R,{article:e,key:e.publishedAt+e.title+"".concat(5*Math.random())}):null})))),r.a.createElement("div",{className:"p-1 flex d-flex flex-column align-items-center ".concat(a.loading?"justify-content-center":"")},r.a.createElement(B.Scrollbars,{renderView:function(e){return r.a.createElement("div",Object.assign({},e,{className:"pr-3 flex d-flex flex-column align-items-center ".concat(a.loading?"justify-content-center":"")}))}},a.loading?r.a.createElement(w,{color:"lime",size:100,className:"spinning-logo"}):this.state.local.articles.map((function(e){return e.title&&""!==e.title.trim()?r.a.createElement(R,{article:e,key:e.publishedAt+e.title+"".concat(5*Math.random())}):null})))))))}}]),a}(n.Component),M=Object(y.b)((function(e,t){return Object(o.a)({},t,{user:e.user,authed:e.authed})}))(z),G=a(271),W=a(558);var V=function(e){return r.a.createElement("div",{className:"mb-2 chatMessage bg-white p-2"},r.a.createElement("div",{className:"d-flex flex-row align-items-center mb-1"},r.a.createElement("h6",{style:{color:"#"+e.message.username_color},className:"mb-0"},e.message.username),r.a.createElement(O.a,{countryCode:e.message.country,className:"ml-1"})),r.a.createElement("span",{className:"ml-2"},e.message.message))},H=a(255),F=a.n(H)()("https://covinfo.tech/");var Z=Object(y.b)((function(e,t){return Object(o.a)({},t,{user:e.user,authed:e.authed})}))((function(e){var t=Object(n.useState)(""),a=Object(s.a)(t,2),l=a[0],c=a[1],o=Object(n.useState)([]),i=Object(s.a)(o,2),u=i[0],m=i[1],d=Object(n.useRef)(u),p=Object(n.useRef)(null),f=Object(C.useToasts)().addToast;Object(n.useEffect)((function(){d.current=u}));var h=function(e){m([].concat(Object(G.a)(d.current),[e])),g()};Object(n.useEffect)((function(){return document.title="Chat | COVinfo",F.on("message",h),function(){F.off("message")}}),[]);var g=function(){p.current.scrollToBottom()},b=function(){fetch(encodeURI("".concat("https://covinfo.tech/","/chat/sendMessage?message=").concat(l,"&username=").concat(e.user.username,"&username_color=").concat(e.user.username_color,"&country=").concat(e.user.country)),{method:"POST"}).then((function(e){c("")})).catch((function(e){console.log(e),f("There was a problem sending the message.",{appearance:"error",autoDismiss:!0})}))};return r.a.createElement("div",{className:"w-100 h-100 d-flex flex-column"},r.a.createElement("div",{className:"flex pl-3 pt-3 pr-3 d-flex flex-column"},r.a.createElement("h3",null,"Quarantine Chat"),r.a.createElement(B.Scrollbars,{renderView:function(e){return r.a.createElement("div",Object.assign({},e,{className:"pr-3 flex"}))},ref:p},u.map((function(e){return r.a.createElement(V,{message:e,key:"".concat(e.username,"_").concat(10*Math.random())})})))),r.a.createElement("div",{className:"w-100 p-3"},r.a.createElement("div",{className:"w-100 d-flex flex-row rounded-pill messageInputContainer"},r.a.createElement("input",{type:"text",className:"flex bg-transparent border-0 py-2 px-3 messageInput",placeholder:e.authed?"Message...":"Login to enable chat...",onChange:function(e){return c(e.target.value)},onKeyDown:function(e){13===e.keyCode&&b()},value:l,disabled:!e.authed}),""!==l.trim()?r.a.createElement("button",{className:"bg-primary border-0 d-flex align-items-center justify-content-center pl-3 pr-4",style:{borderTopRightRadius:100,borderBottomRightRadius:100},onClick:b},r.a.createElement(W.a,{color:"white"})):r.a.createElement("div",null))))})),Y=a(14),K=a.n(Y),q=a(559),J=a(560),Q=a(573);var X=function(){var e=Object(n.useState)(""),t=Object(s.a)(e,2),a=t[0],l=t[1],c=Object(n.useState)(""),o=Object(s.a)(c,2),i=o[0],u=o[1],m=Object(j.f)(),d=Object(C.useToasts)().addToast;return r.a.createElement("div",{className:"w-100 h-100 d-flex align-items-center justify-content-center offWhiteBackground"},r.a.createElement("div",{className:"bg-white d-flex flex-column align-items-center form-padding rounded boxShadow"},r.a.createElement("h3",null,"Log in"),r.a.createElement("div",{style:{height:1,width:"25%",backgroundColor:"gray"}}),r.a.createElement("div",{className:"d-flex flex-row align-items-center justify-content-center p-3"},r.a.createElement("button",{className:"smLoginButton bg-white rounded-circle p-2 d-flex align-items-center justify-content-center mx-2",onClick:function(){K.a.auth().signInWithPopup(new K.a.auth.FacebookAuthProvider).then().then((function(e){m.push("/"),d("Logged in.",{appearance:"success",autoDismiss:!0})})).catch((function(e){console.log(e),d("There was a problem logging in.",{appearance:"error",autoDismiss:!0})}))}},r.a.createElement(q.a,null)),r.a.createElement("button",{className:"smLoginButton bg-white rounded-circle p-2 d-flex align-items-center justify-content-center mx-2",onClick:function(){K.a.auth().signInWithPopup(new K.a.auth.GithubAuthProvider).then().then((function(e){m.push("/"),d("Logged in.",{appearance:"success",autoDismiss:!0})})).catch((function(e){console.log(e),d("There was a problem logging in.",{appearance:"error",autoDismiss:!0})}))}},r.a.createElement(J.a,null))),r.a.createElement("span",{className:"mb-2 text-muted"},"or use your email"),r.a.createElement(Q.a,null,r.a.createElement(Q.a.Group,{controlId:"formGroupEmail"},r.a.createElement(Q.a.Label,null,"Email address"),r.a.createElement(Q.a.Control,{type:"email",placeholder:"Email...",value:a,onChange:function(e){return l(e.target.value)}})),r.a.createElement(Q.a.Group,{controlId:"formGroupPassword"},r.a.createElement(Q.a.Label,null,"Password"),r.a.createElement(Q.a.Control,{type:"password",placeholder:"Password...",value:i,onChange:function(e){return u(e.target.value)}})),r.a.createElement("button",{className:"bg-transparent border-0 float-right align-self-end mb-3"},"Forgot Password?")),r.a.createElement("button",{className:"bg-white smLoginButton rounded-pill py-2 px-3",onClick:function(){K.a.auth().signInWithEmailAndPassword(a,i).then((function(e){m.push("/"),d("Logged in.",{appearance:"success",autoDismiss:!0})})).catch((function(e){console.log(e),d("There was a problem logging in.",{appearance:"error",autoDismiss:!0})}))}},"Log in"),r.a.createElement("button",{className:"bg-white smLoginButton rounded-pill py-2 px-3 mt-3",onClick:function(){m.push("/register")}},"Register")))},$=a(125),ee={user:null,authed:!1},te=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:ee,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"UPDATE_USER":return Object(o.a)({},e,{user:t.user,authed:!0});case"CLEAR_USER":return Object(o.a)({},e,{user:null,authed:!1});default:return e}},ae=Object($.b)(te,window.__REDUX_DEVTOOLS_EXTENSION__&&window.__REDUX_DEVTOOLS_EXTENSION__()),ne=a(561),re=a(562);var le=function(){var e=Object(n.useState)(""),t=Object(s.a)(e,2),a=t[0],l=t[1],c=Object(n.useState)(""),o=Object(s.a)(c,2),i=o[0],u=o[1],m=Object(n.useState)(""),d=Object(s.a)(m,2),p=d[0],f=d[1],h=Object(n.useState)(""),g=Object(s.a)(h,2),b=g[0],E=g[1],v=Object(n.useState)("US"),y=Object(s.a)(v,2),w=y[0],x=y[1],N=Object(P.getData)(),O=Object(C.useToasts)().addToast,k=Object(j.f)(),S=function(e){K.a.firestore().collection("users").doc(e).set({username:b,country:w,username_color:"000000",user_id:e}).then((function(){k.push("/"),O("User created.",{appearance:"success",autoDismiss:!0})})).catch((function(e){console.log(e),O("There was a problem creating the user.",{appearance:"error",autoDismiss:!0})}))};return r.a.createElement("div",{className:"w-100 h-100 d-flex align-items-center justify-content-center offWhiteBackground"},r.a.createElement("div",{className:"bg-white d-flex flex-column align-items-center p-5 rounded boxShadow"},r.a.createElement("h3",null,"Register"),r.a.createElement("div",{style:{height:1,width:"25%",backgroundColor:"gray",marginBottom:15}}),r.a.createElement(ne.a,{defaultActiveKey:"email",id:"registerTabs"},r.a.createElement(re.a,{eventKey:"email",title:"Email"},r.a.createElement("div",{className:"d-flex flex-column align-items-center"},r.a.createElement(Q.a,null,r.a.createElement(Q.a.Group,{controlId:"emailUsername"},r.a.createElement(Q.a.Label,null,"Username"),r.a.createElement(Q.a.Control,{type:"text",placeholder:"Username...",value:b,onChange:function(e){return E(e.target.value)}})),r.a.createElement(Q.a.Group,{controlId:"emailCountry"},r.a.createElement(Q.a.Label,null,"Country"),r.a.createElement(Q.a.Control,{as:"select",value:w,onChange:function(e){return x(e.target.value)}},N.map((function(e){return r.a.createElement("option",{key:e.code,value:e.code},e.name)})))),r.a.createElement(Q.a.Group,{controlId:"emailEmail"},r.a.createElement(Q.a.Label,null,"Email address"),r.a.createElement(Q.a.Control,{type:"email",placeholder:"Email...",value:a,onChange:function(e){return l(e.target.value)}})),r.a.createElement(Q.a.Group,{controlId:"emailPassword"},r.a.createElement(Q.a.Label,null,"Password"),r.a.createElement(Q.a.Control,{type:"password",placeholder:"Password...",value:i,onChange:function(e){return u(e.target.value)}})),r.a.createElement(Q.a.Group,{controlId:"emailConfirmPassword"},r.a.createElement(Q.a.Label,null,"Confirm Password"),r.a.createElement(Q.a.Control,{type:"password",placeholder:"Confirm Password...",value:p,onChange:function(e){return f(e.target.value)}}))),r.a.createElement("button",{className:"bg-white smLoginButton rounded-pill w-25 py-2",onClick:function(){return""===b.trim()?O("A valid username is required.",{appearance:"error",autoDismiss:!0}):""!==a.trim()&&/^(([^<>()[\]\\.,;:\s@"]+(\.[^<>()[\]\\.,;:\s@"]+)*)|(".+"))@((\[[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}])|(([a-zA-Z\-0-9]+\.)+[a-zA-Z]{2,}))$/.test(String(a).toLowerCase())?""===i.trim()||""===p.trim()?O("A valid password is required.",{appearance:"error",autoDismiss:!0}):i!==p?O("Passwords do not match",{appearance:"error",autoDismiss:!0}):void K.a.auth().createUserWithEmailAndPassword(a,i).then((function(e){S(e.user.uid)})).catch((function(e){console.log(e),O("There was a problem creating the user.",{appearance:"error",autoDismiss:!0})})):O("A valid email is required.",{appearance:"error",autoDismiss:!0})}},"Register"))),r.a.createElement(re.a,{eventKey:"facebook",title:"Facebook"},r.a.createElement("div",{className:"d-flex flex-column align-items-center"},r.a.createElement(Q.a,null,r.a.createElement(Q.a.Group,{controlId:"facebookUsername"},r.a.createElement(Q.a.Label,null,"Create Username"),r.a.createElement(Q.a.Control,{type:"text",placeholder:"Create Username...",value:b,onChange:function(e){return E(e.target.value)}})),r.a.createElement(Q.a.Group,{controlId:"facebookCountry"},r.a.createElement(Q.a.Label,null,"Country"),r.a.createElement(Q.a.Control,{as:"select",value:w,onChange:function(e){return x(e.target.value)}},N.map((function(e){return r.a.createElement("option",{key:e.code,value:e.code},e.name)}))))),r.a.createElement("button",{className:"bg-white smLoginButton rounded-pill w-25 py-2",onClick:function(){if(""===b.trim())return O("A valid username is required.",{appearance:"error",autoDismiss:!0});K.a.auth().signInWithPopup(new K.a.auth.FacebookAuthProvider).then().then((function(e){S(e.user.uid)})).catch((function(e){console.log(e),O("There was a problem creating the user.",{appearance:"error",autoDismiss:!0})}))}},r.a.createElement(q.a,null)," Register"))),r.a.createElement(re.a,{eventKey:"github",title:"Github"},r.a.createElement("div",{className:"d-flex flex-column align-items-center"},r.a.createElement(Q.a,null,r.a.createElement(Q.a.Group,{controlId:"githubUsername"},r.a.createElement(Q.a.Label,null,"Create Username"),r.a.createElement(Q.a.Control,{type:"text",placeholder:"Create Username...",value:b,onChange:function(e){return E(e.target.value)}})),r.a.createElement(Q.a.Group,{controlId:"githubCountry"},r.a.createElement(Q.a.Label,null,"Country"),r.a.createElement(Q.a.Control,{as:"select",value:w,onChange:function(e){return x(e.target.value)}},N.map((function(e){return r.a.createElement("option",{key:e.code,value:e.code},e.name)}))))),r.a.createElement("button",{className:"bg-white smLoginButton rounded-pill w-25 py-2",onClick:function(){if(""===b.trim())return O("A valid username is required.",{appearance:"error",autoDismiss:!0});K.a.auth().signInWithPopup(new K.a.auth.GithubAuthProvider).then().then((function(e){S(e.user.uid)})).catch((function(e){console.log(e),O("There was a problem creating the user.",{appearance:"error",autoDismiss:!0})}))}},r.a.createElement(J.a,null)," Register"))))))},ce=a(256),oe=a(563);var se=Object(y.b)((function(e,t){return Object(o.a)({},t,{user:e.user})}),(function(e){return{updateUser:function(t){return e({type:"UPDATE_USER",user:t})}}}))((function(e){var t=Object(n.useState)(e.user?e.user.username:""),a=Object(s.a)(t,2),l=a[0],c=a[1],i=Object(n.useState)(e.user?e.user.country:""),u=Object(s.a)(i,2),m=u[0],d=u[1],p=Object(n.useState)(e.user?e.user.username_color:"ffffff"),f=Object(s.a)(p,2),h=f[0],g=f[1],b=Object(n.useState)({}),E=Object(s.a)(b,2),v=E[0],y=E[1],x=Object(n.useState)(!1),N=Object(s.a)(x,2),O=N[0],k=N[1],S=Object(n.useState)(!0),_=Object(s.a)(S,2),T=_[0],D=_[1],I=Object(P.getData)(),L=Object(j.f)(),A=Object(C.useToasts)().addToast;Object(n.useEffect)((function(){e.user&&(D(!1),e.user.username!==l&&c(e.user.username),e.user.country!==m&&d(e.user.country),e.user.username_color!==h&&g(e.user.username_color))}),[e.user,l,c,m,d,h,g]);var U=function(e,t){var a=v;a[e]=t,y(a)},R=function(){k(!O)};return r.a.createElement("div",{className:"w-100 h-100 d-flex align-items-center justify-content-center offWhiteBackground position-relative"},T?r.a.createElement("div",{style:{position:"absolute",left:0,right:0,top:0,bottom:0,backgroundColor:"rgba(255, 255, 255, 0.4)"},className:"d-flex align-items-center justify-content-center"},r.a.createElement(w,{color:"lime",size:100,className:"spinning-logo"})):null,r.a.createElement("div",{className:"bg-white d-flex flex-column align-items-center p-5 rounded boxShadow"},r.a.createElement("h3",null,"Settings"),r.a.createElement("div",{style:{height:1,width:"25%",backgroundColor:"gray"}}),r.a.createElement(Q.a,null,r.a.createElement(Q.a.Group,{controlId:"settingsUsername"},r.a.createElement(Q.a.Label,null,"Username"),r.a.createElement(Q.a.Control,{type:"text",placeholder:"Username...",value:v.username||l,onChange:function(e){c(e.target.value),U("username",e.target.value)}})),r.a.createElement(Q.a.Group,{controlId:"settingsCountry"},r.a.createElement(Q.a.Label,null,"Country"),r.a.createElement(Q.a.Control,{as:"select",value:v.country||m,onChange:function(e){d(e.target.value),U("country",e.target.value)}},I.map((function(e){return r.a.createElement("option",{key:e.code,value:e.code},e.name)})))),r.a.createElement(Q.a.Group,{controlId:"settingsColor"},r.a.createElement("div",{className:"d-flex flex-row align-items-center justify-content-center"},r.a.createElement("div",{className:"rounded mr-2 position-relative",style:{width:30,height:30,backgroundColor:"#".concat(v.username_color||h)}},r.a.createElement("div",{style:{cursor:"pointer",width:30,height:30},onClick:function(e){e.preventDefault(),R()}}),O?r.a.createElement("div",{style:{position:"absolute",left:"-20%",top:"130%"}},r.a.createElement("div",{style:{position:"fixed",top:0,bottom:0,left:0,right:0},onClick:R}),r.a.createElement(ce.TwitterPicker,{color:"#".concat(v.username_color||h),onChangeComplete:function(e){g(e.hex.split("#")[1]),U("username_color",e.hex.split("#")[1]),R()}})):null),r.a.createElement("h6",{className:"mb-0"},"Username Color")))),r.a.createElement("button",{className:"bg-white smLoginButton rounded-pill w-25 py-2 ".concat(0===Object.keys(v).length?"fullButton":""),onClick:function(){K.a.firestore().collection("users").doc(e.user.user_id).update(v).then((function(){e.updateUser(Object(o.a)({},e.user,{},v)),y({}),A("User saved.",{appearance:"success",autoDismiss:!0})})).catch((function(e){console.log(e),A("There was a problem saving the user.",{appearance:"error",autoDismiss:!0})}))},disabled:0===Object.keys(v).length},"Save User"),r.a.createElement("button",{className:"bg-white smLoginButton rounded-pill w-25 py-2 text-danger mt-2",onClick:function(){K.a.auth().signOut().then((function(){L.push("/"),A("Logged out.",{appearance:"success",autoDismiss:!0})})).catch((function(e){console.log(e),A("There was a problem logging out.",{appearance:"error",autoDismiss:!0})}))}},r.a.createElement(oe.a,null)," Log Out")))})),ie=a(72),ue=a.n(ie),me=a(135),de=function(e){return new Promise((function(t,a){fetch("https://www.googleapis.com/youtube/v3/search?key=".concat("AIzaSyCBuW_IWsZ1biICjlWto_ySrSBiH8e0ZkA","&part=snippet&videoEmbeddable=true&q=").concat(encodeURI(e),"&type=video&videoCategoryId=10"),{headers:{Accept:"application/json"}}).then((function(e){return e.json()})).then((function(e){e.items?t(e.items):a("No videos found")})).catch((function(e){return a(e)}))}))},pe=a(257),fe=a.n(pe),he=a(564),ge=a(565),be=a(567),Ee=a(568),ve=a(569),ye=a(570),we=a(259),xe=a(574),je=a(258),Ne=a.n(je);var Oe=Object(y.b)((function(e,t){return Object(o.a)({},t,{user:e.user,authed:e.authed})}))((function(e){var t=Object(n.useState)(""),a=Object(s.a)(t,2),l=a[0],c=a[1],i=Object(n.useState)([]),u=Object(s.a)(i,2),d=u[0],p=u[1],f=Object(n.useState)([]),h=Object(s.a)(f,2),g=h[0],b=h[1],E=Object(n.useState)(!0),v=Object(s.a)(E,2),y=v[0],x=v[1],j=Object(n.useState)(!1),N=Object(s.a)(j,2),k=N[0],S=N[1],_=Object(n.useState)(!1),T=Object(s.a)(_,2),D=T[0],I=T[1],L=Object(n.useState)(null),A=Object(s.a)(L,2),R=A[0],P=A[1],z=Object(n.useState)("00:00:00"),M=Object(s.a)(z,2),G=M[0],W=M[1],V=Object(n.useState)("popular"),H=Object(s.a)(V,2),F=H[0],Z=H[1],Y=Object(C.useToasts)().addToast;Object(n.useEffect)((function(){document.title="Music | COVinfo",K.a.firestore().collection("songs").get().then((function(e){var t=[];e.forEach((function(e){return t.push(e.data())})),b(J(t)),x(!1),S(!k)})).catch((function(e){console.log(e),Y("There was a problem loading the songs.",{appearance:"error",autoDismiss:!0})}))}),[]);var q=function(){var e=Object(me.a)(ue.a.mark((function e(t){return ue.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:F!==t&&(Z(t),b(J(g,t)),S(!k),Y("Filtering by ".concat(t,"."),{appearance:"success",autoDismiss:!0}));case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),J=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:F;switch(t){case"recent":e.sort((function(e,t){return U()(t.created_at)-U()(e.created_at)}));break;default:e.sort((function(e,t){return t.upvotes.length-e.upvotes.length}))}return e},X=function(){""!==l.trim()?de(l).then((function(e){p(e),I(!0)})).catch((function(e){console.log(e),Y("There was a problem searching YouTube.",{appearance:"error",autoDismiss:!0})})):p([])},$=function(){var e=G.split(":"),t=parseInt(e[0]),a=parseInt(e[1]),n=parseInt(e[2]);return U.a.duration(t,"hours").asSeconds()+U.a.duration(a,"minutes").asSeconds()+n},ee=function(){I(!1),W("00:00:00"),P(null),p([])};return r.a.createElement("div",{className:"w-100 h-100 d-flex flex-column"},r.a.createElement(m.a,{show:D,onHide:ee},r.a.createElement(m.a.Header,{closeButton:!0},r.a.createElement(m.a.Title,null,"Suggest A Song")),r.a.createElement(m.a.Body,null,r.a.createElement("div",null,d.map((function(e){return r.a.createElement("button",{className:"w-100 border-0 ".concat(R&&e.id.videoId===R.id.videoId?"border-info":"bg-transparent"),onClick:function(){return P(e)}},r.a.createElement("div",{className:"d-flex flex flex-row align-items-center my-2"},r.a.createElement("img",{src:e.snippet.thumbnails.default.url,width:e.snippet.thumbnails.default.width*(2/3),height:e.snippet.thumbnails.default.height*(2/3),alt:"thumbnail"}),r.a.createElement("div",{className:"ml-2 text-left"},r.a.createElement("h5",{className:"mb-0 text-dark"},e.snippet.title.replace(/&#(\d+);/g,(function(e,t){return String.fromCharCode(t)}))),r.a.createElement("span",{className:"ml-2 h6 text-black-50"},e.snippet.channelTitle," \xb7",U()(e.snippet.publishedAt).fromNow()))))}))),r.a.createElement(Q.a.Group,null,r.a.createElement(Q.a.Label,null,"Timestamp"),r.a.createElement(Ne.a,{mask:"99:99:99",defaultValue:G,onChange:function(e){return W(e.target.value)}},(function(e){return r.a.createElement(Q.a.Control,Object.assign({type:"text"},e))})))),r.a.createElement(m.a.Footer,null,r.a.createElement(we.a,{variant:"primary",className:"d-flex flex-row align-items-center",onClick:function(){if(null!==R){var t={url:"https://youtube.com/watch?v=".concat(R.id.videoId),title:R.snippet.title,seconds:$(),created_at:U()().toISOString(),upvotes:[],user:e.user,song_id:""};K.a.firestore().collection("songs").add(t).then((function(e){K.a.firestore().collection("songs").doc(e.id).update({song_id:e.id}).then((function(){var a=g;a.push(Object(o.a)({},t,{song_id:e.id})),b(J(a)),c(""),ee(),Y("Song added.",{appearance:"success",autoDismiss:!0})})).catch((function(e){console.log(e),Y("There was a problem adding the song.",{appearance:"error",autoDismiss:!0})}))})).catch((function(e){console.log(e),Y("There was a problem adding the song.",{appearance:"error",autoDismiss:!0})}))}}},r.a.createElement(he.a,{className:"mr-1"})," Suggest Song"))),r.a.createElement("div",{className:"w-100 px-3 mt-3"},r.a.createElement("h3",null,"Hand Washing Music"),r.a.createElement("div",{className:"w-100 d-flex flex-row rounded-pill messageInputContainer"},r.a.createElement("input",{type:"text",className:"flex bg-transparent border-0 py-2 px-3 messageInput",placeholder:e.authed?"Add song from YouTube...":"Login to enable adding songs...",onChange:function(e){return c(e.target.value)},disabled:!e.authed,onKeyDown:function(e){13===e.keyCode&&X()},value:l}),""!==l.trim()?r.a.createElement("button",{className:"bg-primary border-0 d-flex align-items-center justify-content-center pl-3 pr-4",style:{borderTopRightRadius:100,borderBottomRightRadius:100},onClick:X},r.a.createElement(ge.a,{color:"white"})):r.a.createElement("div",null))),y?r.a.createElement("div",{className:"d-flex align-items-center justify-content-center w-100 flex"},r.a.createElement(w,{color:"lime",size:100,className:"spinning-logo"})):r.a.createElement("div",{className:"h-100 p-3"},r.a.createElement(xe.a,{className:"mb-3 d-flex justify-content-end"},r.a.createElement(xe.a.Toggle,{variant:"light"},"Filter ",r.a.createElement(be.a,null)),r.a.createElement(xe.a.Menu,null,r.a.createElement(xe.a.Item,{onClick:function(){return q("popular")},style:{backgroundColor:"popular"===F?"lightgray":"white"}},r.a.createElement("div",{className:"d-flex flex-row align-items-center"},r.a.createElement("span",{className:"flex"},"Popular")," ",r.a.createElement(Ee.a,null))),r.a.createElement(xe.a.Item,{onClick:function(){return q("recent")},style:{backgroundColor:"recent"===F?"lightgray":"white"}},r.a.createElement("div",{className:"d-flex flex-row align-items-center"},r.a.createElement("span",{className:"flex"},"Recent")," ",r.a.createElement(ve.a,null))))),r.a.createElement(B.Scrollbars,{hideTracksWhenNotNeeded:!0,renderView:function(e){return r.a.createElement("div",e)}},g.map((function(t){return r.a.createElement("div",{className:"border d-inline-block m-1",style:{borderRadius:10,borderColor:"lightgray"},key:t.song_id},r.a.createElement(fe.a,{url:"".concat(t.url,"&t=").concat(t.seconds),controls:!1,className:"m-2",width:2/3*640-30,height:210}),r.a.createElement("div",{style:{height:1,width:"100%",backgroundColor:"lightgray"}}),r.a.createElement("div",{className:"p-2 d-flex flex-row align-items-center"},r.a.createElement("div",{className:"flex"},r.a.createElement("span",null,"Submitted by: "),r.a.createElement("span",{style:{color:"#".concat(t.user.username_color)}},t.user.username),r.a.createElement(O.a,{countryCode:t.user.country,className:"ml-1"})),r.a.createElement("div",{className:"d-flex flex-row align-items-center"},e.authed&&"admin"===e.user.type?r.a.createElement("button",{className:"bg-transparent border-0",onClick:function(){return e=t.song_id,void(window.confirm("Are you sure you want to delete that song?")&&K.a.firestore().collection("songs").doc(e).delete().then((function(){b(J(g.filter((function(t){return t.song_id!==e})))),S(!k),Y("The song was deleted.",{appearance:"success",autoDismiss:!0})})).catch((function(e){console.log(e),Y("There was a problem deleting the song.",{appearance:"error",autoDismiss:!0})})));var e}},r.a.createElement(ye.a,{className:"text-danger"})):null,r.a.createElement("span",null,"(",t.upvotes.length,")"),r.a.createElement("button",{className:"bg-transparent border-0",onClick:function(){return function(t){var a=g.findIndex((function(e){return e.song_id===t})),n=g[a].upvotes;n.includes(e.user.user_id)?n=n.filter((function(t){return t!==e.user.user_id})):n.push(e.user.user_id);var r=g;r[a]=Object(o.a)({},r[a],{upvotes:n}),K.a.firestore().collection("songs").doc(t).update({upvotes:n}).then((function(){b(J(r)),S(!k),Y("Upvote toggled.",{appearance:"success",autoDismiss:!0})})).catch((function(e){console.log(e),Y("There was a problem toggling the upvote.",{appearance:"error",autoDismiss:!0})}))}(t.song_id)},disabled:!e.authed,title:e.authed?null:"Login to enable upvoting"},r.a.createElement(Ee.a,{color:e.authed&&t.upvotes.includes(e.user.user_id)?"gold":"black"})))))})))))})),Ce=a(571),ke=a(270),Se=a(266),_e=a.n(Se);var Te=Object(y.b)((function(e,t){return Object(o.a)({},t,{user:e.user,authed:e.authed})}))((function(e){var t=Object(n.useState)([]),a=Object(s.a)(t,2),l=a[0],c=a[1],i=Object(n.useState)(!0),u=Object(s.a)(i,2),d=u[0],p=u[1],f=Object(n.useState)(!1),h=Object(s.a)(f,2),b=h[0],E=h[1],v=Object(n.useState)(!1),y=Object(s.a)(v,2),x=y[0],j=y[1],N=Object(n.useState)(r.a.createElement(g.a,{size:100})),k=Object(s.a)(N,2),S=k[0],_=k[1],T=Object(n.useState)(!1),D=Object(s.a)(T,2),I=D[0],L=D[1],A=Object(n.useState)(null),R=Object(s.a)(A,2),P=R[0],z=R[1],M=Object(n.useState)("popular"),G=Object(s.a)(M,2),W=G[0],V=G[1],H=Object(n.useState)(0),F=Object(s.a)(H,2),Z=F[0],Y=F[1],q=Object(n.useState)(!1),J=Object(s.a)(q,2),Q=J[0],X=J[1],$=Object(n.useRef)(null),ee=Object(C.useToasts)().addToast;Object(n.useEffect)((function(){K.a.firestore().collection("memes").get().then((function(e){var t=[];e.forEach((function(e){return t.push(e.data())})),c(ae(t)),p(!1),E(!b)})).catch((function(e){console.log(e),ee("There was a problem loading the memes.",{appearance:"error",autoDismiss:!0})}))}),[]);var te=function(){var e=Object(me.a)(ue.a.mark((function e(t){return ue.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:W!==t&&(V(t),c(ae(l,t)),E(!b),ee("Filtering by ".concat(t,"."),{appearance:"success",autoDismiss:!0}));case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),ae=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:W;switch(t){case"recent":e.sort((function(e,t){return U()(t.created_at)-U()(e.created_at)}));break;default:e.sort((function(e,t){return t.upvotes.length-e.upvotes.length}))}return e},ne=function(){j(!1),z(null)};return r.a.createElement("div",{className:"w-100 h-100 d-flex flex-column",ref:$},r.a.createElement(m.a,{show:x,onHide:ne},r.a.createElement(m.a.Header,{closeButton:!0},r.a.createElement(m.a.Title,null,"Upload a Meme")),r.a.createElement(m.a.Body,{className:"d-flex flex-column align-items-center"},P?r.a.createElement("button",{className:"bg-transparent border-0 position-relative",onMouseEnter:function(){return L(!0)},onMouseLeave:function(){return L(!1)},onClick:function(){return z(null)}},r.a.createElement("img",{src:URL.createObjectURL(P),alt:"memeToUpload",style:{borderRadius:5}}),I?r.a.createElement("div",{className:"position-absolute d-flex flex-row align-items-center justify-content-center",style:{left:0,top:0,bottom:0,right:0,backgroundColor:"rgba(255, 255, 255, 0.4)"}},r.a.createElement(ye.a,{className:"text-danger",size:50})):r.a.createElement("div",null)):r.a.createElement(ke.a,{onDrop:function(e){return z(e[0])}},(function(e){var t=e.getRootProps,a=e.getInputProps;return(r.a.createElement("section",null,r.a.createElement("div",t({className:"dropzone",onMouseEnter:function(){return _(r.a.createElement(he.a,{size:100}))},onMouseLeave:function(){return _(r.a.createElement(g.a,{size:100}))}}),r.a.createElement("input",a({multiple:!1,accept:"image/png, image/jpeg, image/gif"})),S,r.a.createElement("span",null,"Drag 'n' drop some files here, or click to select files"))))})),Q?r.a.createElement(Ce.a,{now:Z,label:"".concat(Z,"%"),className:"w-100 mt-2"}):null),r.a.createElement(m.a.Footer,null,r.a.createElement(we.a,{variant:"primary",className:"d-flex flex-row align-items-center",onClick:function(){if(P){X(!0);var t={url:"",created_at:"",upvotes:[],user:e.user,meme_id:""};K.a.firestore().collection("memes").add(t).then((function(e){t.meme_id=e.id,K.a.storage().ref("images/".concat(t.meme_id)).put(P).on("state_changed",(function(e){var t=Math.round(e.bytesTransferred/e.totalBytes*100);Y(t)}),(function(e){console.log(e),ee("There was a problem adding the meme.",{appearance:"error",autoDismiss:!0})}),(function(){K.a.storage().ref("images").child(t.meme_id).getDownloadURL().then((function(e){t.url=e,t.created_at=U()().toISOString(),K.a.firestore().collection("memes").doc(t.meme_id).update(t).then((function(){var e=l;e.push(t),c(ae(e)),X(!1),ne(),ee("Meme added.",{appearance:"success",autoDismiss:!0})})).catch((function(e){console.log(e),ee("There was a problem adding the meme.",{appearance:"error",autoDismiss:!0})}))})).catch((function(e){console.log(e),ee("There was a problem adding the meme.",{appearance:"error",autoDismiss:!0})}))}))})).catch((function(e){console.log(e),ee("There was a problem adding the meme.",{appearance:"error",autoDismiss:!0})}))}}},r.a.createElement(he.a,{className:"mr-1"})," Upload Meme"))),r.a.createElement("h3",{className:"px-3 pt-3"},"Coronavirus Memes"),r.a.createElement("div",{className:"d-flex flex-row align-items-center justify-content-between mb-3 px-3"},r.a.createElement(we.a,{variant:"success",onClick:function(){return j(!0)},disabled:!e.authed},e.authed?"+ Add Meme":"Login to add memes"),r.a.createElement(xe.a,null,r.a.createElement(xe.a.Toggle,{variant:"light"},"Filter ",r.a.createElement(be.a,null)),r.a.createElement(xe.a.Menu,null,r.a.createElement(xe.a.Item,{onClick:function(){return te("popular")},style:{backgroundColor:"popular"===W?"lightgray":"white"}},r.a.createElement("div",{className:"d-flex flex-row align-items-center"},r.a.createElement("span",{className:"flex"},"Popular")," ",r.a.createElement(Ee.a,null))),r.a.createElement(xe.a.Item,{onClick:function(){return te("recent")},style:{backgroundColor:"recent"===W?"lightgray":"white"}},r.a.createElement("div",{className:"d-flex flex-row align-items-center"},r.a.createElement("span",{className:"flex"},"Recent")," ",r.a.createElement(ve.a,null)))))),d?r.a.createElement("div",{className:"d-flex align-items-center justify-content-center w-100 flex"},r.a.createElement(w,{color:"lime",size:100,className:"spinning-logo"})):r.a.createElement("div",{className:"flex p-3"},r.a.createElement(B.Scrollbars,{hideTracksWhenNotNeeded:!0,renderView:function(e){return r.a.createElement("div",e)}},r.a.createElement(_e.a,{className:"pb-5"},l.map((function(t){return r.a.createElement("div",{className:"border d-inline-block m-1",style:{borderRadius:10,borderColor:"lightgray",width:$.current?$.current.offsetWidth/4+30:0},key:t.meme_id},r.a.createElement("img",{src:t.url,alt:t.meme_id,className:"w-100 p-2"}),r.a.createElement("div",{style:{height:1,width:"100%",backgroundColor:"lightgray"}}),r.a.createElement("div",{className:"p-2 d-flex flex-row align-items-center"},r.a.createElement("div",{className:"flex"},r.a.createElement("span",null,"Submitted by: "),r.a.createElement("span",{style:{color:"#".concat(t.user.username_color)}},t.user.username),r.a.createElement(O.a,{countryCode:t.user.country,className:"ml-1"})),r.a.createElement("div",{className:"d-flex flex-row align-items-center"},e.authed&&"admin"===e.user.type?r.a.createElement("button",{className:"bg-transparent border-0",onClick:function(){return e=t.meme_id,void(window.confirm("Are you sure you want to delete that meme?")&&K.a.firestore().collection("memes").doc(e).delete().then((function(){K.a.storage().ref("images/".concat(e)).delete().then((function(){c(ae(l.filter((function(t){return t.meme_id!==e})))),E(!b),ee("The meme was deleted.",{appearance:"success",autoDismiss:!0})})).catch((function(e){console.log(e),ee("There was a problem deleting the meme.",{appearance:"error",autoDismiss:!0})}))})).catch((function(e){console.log(e),ee("There was a problem deleting the meme.",{appearance:"error",autoDismiss:!0})})));var e}},r.a.createElement(ye.a,{className:"text-danger"})):null,r.a.createElement("span",null,"(",t.upvotes.length,")"),r.a.createElement("button",{className:"bg-transparent border-0",onClick:function(){return function(t){var a=l.findIndex((function(e){return e.meme_id===t})),n=l[a].upvotes;n.includes(e.user.user_id)?n=n.filter((function(t){return t!==e.user.user_id})):n.push(e.user.user_id);var r=l;r[a]=Object(o.a)({},r[a],{upvotes:n}),K.a.firestore().collection("memes").doc(t).update({upvotes:n}).then((function(){c(ae(r)),E(!b),ee("Upvote toggled.",{appearance:"success",autoDismiss:!0})})).catch((function(e){console.log(e),ee("There was a problem toggling the upvote.",{appearance:"error",autoDismiss:!0})}))}(t.meme_id)},disabled:!e.authed,title:e.authed?null:"Login to enable upvoting"},r.a.createElement(Ee.a,{color:e.authed&&t.upvotes.includes(e.user.user_id)?"gold":"black"})))))}))))))}));var De=function(){return r.a.createElement(y.a,{store:ae},r.a.createElement(C.ToastProvider,{autoDismissTimeout:3e3},r.a.createElement(v.a,null,r.a.createElement("div",{className:"d-flex flex-row h-100"},r.a.createElement(x,null),r.a.createElement(j.c,null,r.a.createElement(j.a,{path:"/map"},r.a.createElement(_,null)),r.a.createElement(j.a,{path:"/chat"},r.a.createElement(Z,null)),r.a.createElement(j.a,{path:"/music"},r.a.createElement(Oe,null)),r.a.createElement(j.a,{path:"/memes"},r.a.createElement(Te,null)),r.a.createElement(j.a,{path:"/login"},r.a.createElement(X,null)),r.a.createElement(j.a,{path:"/register"},r.a.createElement(le,null)),r.a.createElement(j.a,{path:"/settings"},r.a.createElement(se,null)),r.a.createElement(j.a,{path:"/"},r.a.createElement(M,null)))))))};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));var Ie=a(267),Le=a.n(Ie),Ae=a(74),Ue=a.n(Ae),Re=(a(542),a(543),a(544),a(545),a(546),function(e){var t={username:e.displayName,country:"US",username_color:"000000",user_id:e.uid};Ue.a.firestore().collection("users").doc(e.uid).set(t).then((function(){return ae.dispatch({type:"UPDATE_USER",user:t})}))});Le.a.setApiKey("AIzaSyCBuW_IWsZ1biICjlWto_ySrSBiH8e0ZkA"),Ue.a.initializeApp({apiKey:"AIzaSyCBuW_IWsZ1biICjlWto_ySrSBiH8e0ZkA",authDomain:"covinfo.firebaseapp.com",databaseURL:"https://covinfo.firebaseio.com",projectId:"covinfo",storageBucket:"covinfo.appspot.com",messagingSenderId:"174794034863",appId:"1:174794034863:web:a865952aec9b1154d6ce5a",measurementId:"G-G84RNWQM40"}),Ue.a.analytics(),Ue.a.performance(),Ue.a.auth().onAuthStateChanged((function(e){e?Ue.a.firestore().collection("users").doc(e.uid).get().then((function(t){t.exists?ae.dispatch({type:"UPDATE_USER",user:t.data()}):Re(e)})).catch((function(t){Re(e)})):ae.dispatch({type:"CLEAR_USER"})})),c.a.render(r.a.createElement(r.a.StrictMode,null,r.a.createElement(De,null)),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))}},[[276,1,2]]]);
//# sourceMappingURL=main.9bc16124.chunk.js.map