(this.webpackJsonpCOVinfo=this.webpackJsonpCOVinfo||[]).push([[0],{273:function(e,t,a){e.exports=a(525)},279:function(e,t,a){},342:function(e,t){},525:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),c=a(25),l=a.n(c),o=(a(178),a(278),a(279),a(15)),s=a(9),i=a(555),u=a(270),m=a(552),d=a(252),p=a(529),f=a(530),h=a(531),g=a(532),b=a(533),E=a(534),v=a(535),y=a(536),w=a(537),x=a(31),j=a(26),O=function(e){var t=e.style,a=void 0===t?{}:t,n=e.color,c=void 0===n?"black":n,l=e.className,o=void 0===l?"":l,s=e.size,i=void 0===s?100:s;return(r.a.createElement("svg",{version:"1.1",viewBox:"0 0 64 64",xmlns:"http://www.w3.org/2000/svg",style:a,fill:c,className:o,height:i,width:i},r.a.createElement("path",{d:" c-1.2-0.8-2.4,0.1-3.2,0.7c-0.1,0.1-0.3,0.2-0.4,0.3c0-0.2,0-0.4,0-0.5c0-0.9-0.1-2.5-1.6-2.9c-1.4-0.3-2.2,1-2.8,1.8  c-0.1,0.1-0.2,0.3-0.3,0.4c-0.1-0.2-0.1-0.3-0.2-0.5c-0.4-0.9-0.9-2.3-2.5-2.2c-1.5,0.2-1.8,1.7-2,2.6c0,0.1-0.1,0.3-0.1,0.5  c-0.1-0.1-0.2-0.3-0.3-0.4c-0.7-0.8-1.7-1.9-3.1-1.3c-1.3,0.7-1.1,2.2-1,3.2c0,0.2,0.1,0.4,0.1,0.6c-0.2-0.1-0.3-0.2-0.5-0.2  c-0.8-0.4-2.3-1.2-3.4-0.1c-1,1.1-0.3,2.4,0.2,3.3c0.1,0.2,0.2,0.5,0.3,0.7c-0.2,0-0.5,0-0.7,0c-1-0.1-2.6-0.2-3.2,1.3  c-0.2,0.5,0,1.1,0.5,1.3c0.5,0.2,1.1,0,1.3-0.5c0.1-0.2,0.8-0.1,1.2-0.1c0.9,0.1,2,0.1,2.6-0.8c0.6-0.9,0.1-2-0.3-2.8  c-0.1-0.3-0.4-0.8-0.4-1c0.2,0,0.7,0.3,1,0.4c0.8,0.4,1.8,0.9,2.7,0.3c0.9-0.6,0.8-1.8,0.6-2.7c0-0.3-0.1-0.8-0.1-1  c0.2,0.2,0.5,0.5,0.7,0.7c0.6,0.7,1.4,1.5,2.4,1.2c1.1-0.3,1.3-1.4,1.5-2.3c0.1-0.3,0.2-0.7,0.2-0.9c0.1,0.2,0.3,0.6,0.4,0.9  c0.3,0.9,0.8,1.9,1.8,2c1.1,0.1,1.7-0.9,2.2-1.6c0.1-0.2,0.4-0.6,0.5-0.8c0.1,0.3,0.1,0.7,0.1,1c0,0.9,0.1,2.1,1.1,2.5  c1,0.5,1.9-0.2,2.6-0.8c0.2-0.2,0.6-0.5,0.8-0.6c0,0.3-0.2,0.7-0.3,1c-0.3,0.9-0.6,2,0.1,2.7c0.8,0.8,1.9,0.5,2.7,0.3  c0.3-0.1,1-0.3,1.1-0.3c0,0.2-0.4,0.7-0.6,1c-0.5,0.7-1.3,1.7-0.8,2.7c0.2,0.4,0.5,0.6,0.9,0.6c0.1,0,0.3,0,0.4-0.1  c0.5-0.2,0.7-0.7,0.5-1.2c0.1-0.2,0.3-0.6,0.5-0.8C46.1,29.1,47,27.9,46.2,26.6z"}),r.a.createElement("path",{d:"M56.9,42.9c-1.1-0.7-2.5-0.5-3.4,0.3l-2.8-1.6c1-2,1.7-4.1,2.1-6.4l4,0.4l0.2-2l-4-0.4c0-0.4,0.1-0.8,0.1-1.2  s0-0.8-0.1-1.2l4-0.4l-0.2-2l-4,0.4c-0.3-2.3-1.1-4.4-2.1-6.4l2.8-1.6c0.9,0.8,2.3,1,3.4,0.3c1.4-0.8,1.9-2.7,1.1-4.1  s-2.7-1.9-4.1-1.1c-1.1,0.7-1.7,1.9-1.4,3.1l-2.8,1.6c-1.2-1.9-2.8-3.6-4.5-5l2.4-3.3l-1.6-1.2l-2.4,3.3c-0.7-0.4-1.4-0.8-2.1-1.2  l1.6-3.7l-1.8-0.8l-1.6,3.7c-2.1-0.8-4.3-1.3-6.6-1.4V7.8c1.2-0.4,2-1.5,2-2.8c0-1.7-1.3-3-3-3s-3,1.3-3,3c0,1.3,0.8,2.4,2,2.8v3.2  c-2.3,0.1-4.5,0.6-6.6,1.4l-1.6-3.7l-1.8,0.8l1.6,3.7c-0.7,0.4-1.4,0.8-2.1,1.2l-2.4-3.3l-1.6,1.2l2.4,3.3c-1.8,1.4-3.3,3.1-4.5,5  L11.6,19c0.2-1.2-0.3-2.5-1.4-3.1C8.7,15.1,6.8,15.6,6,17s-0.3,3.3,1.1,4.1c1.1,0.7,2.5,0.5,3.4-0.3l2.8,1.6c-1,2-1.7,4.1-2.1,6.4  l-4-0.4l-0.2,2l4,0.4c0,0.4-0.1,0.8-0.1,1.2s0,0.8,0.1,1.2l-4,0.4l0.2,2l4-0.4c0.3,2.3,1.1,4.4,2.1,6.4l-2.8,1.6  c-0.9-0.8-2.3-1-3.4-0.3C5.7,43.7,5.2,45.6,6,47s2.7,1.9,4.1,1.1c1.1-0.7,1.7-1.9,1.4-3.1l2.8-1.6c1.2,1.9,2.8,3.6,4.5,5l-2.4,3.3  l1.6,1.2l2.4-3.3c0.7,0.4,1.4,0.8,2.1,1.2l-1.6,3.7l1.8,0.8l1.6-3.7c2.1,0.8,4.3,1.3,6.6,1.4v3.2c-1.2,0.4-2,1.5-2,2.8  c0,1.7,1.3,3,3,3s3-1.3,3-3c0-1.3-0.8-2.4-2-2.8v-3.2c2.3-0.1,4.5-0.6,6.6-1.4l1.6,3.7l1.8-0.8l-1.6-3.7c0.7-0.4,1.4-0.8,2.1-1.2  l2.4,3.3l1.6-1.2l-2.4-3.3c1.8-1.4,3.3-3.1,4.5-5l2.8,1.6c-0.2,1.2,0.3,2.5,1.4,3.1c1.4,0.8,3.3,0.3,4.1-1.1S58.3,43.7,56.9,42.9z   M44,46.8l-1.2-1.6l-1.6,1.2l1.2,1.6c-0.6,0.4-1.1,0.7-1.7,1l-0.8-1.8L38,47.9l0.8,1.8C37,50.4,35,50.8,33,50.9V49h-2v1.9  c-2-0.1-4-0.5-5.8-1.2l0.8-1.8l-1.8-0.8l-0.8,1.8c-0.6-0.3-1.2-0.6-1.7-1l1.2-1.6l-1.6-1.2L20,46.8c-1.5-1.3-2.9-2.7-4-4.4l1.7-1  l-1-1.7l-1.7,1c-0.9-1.7-1.5-3.6-1.8-5.6l1.9-0.2l-0.2-2L13.1,33c0-0.3-0.1-0.7-0.1-1s0-0.7,0.1-1l1.9,0.2l0.2-2L13.3,29  c0.3-2,0.9-3.9,1.8-5.6l1.7,1l1-1.7l-1.7-1c1.1-1.7,2.4-3.2,4-4.4l1.2,1.6l1.6-1.2l-1.2-1.6c0.6-0.4,1.1-0.7,1.7-1l0.8,1.8l1.8-0.8  l-0.8-1.8c1.8-0.7,3.8-1.1,5.8-1.2V15h2v-1.9c2,0.1,4,0.5,5.8,1.2L38,16.1l1.8,0.8l0.8-1.8c0.6,0.3,1.2,0.6,1.7,1l-1.2,1.6l1.6,1.2  l1.2-1.6c1.5,1.3,2.9,2.7,4,4.4l-1.7,1l1,1.7l1.7-1c0.9,1.7,1.5,3.6,1.8,5.6l-1.9,0.2l0.2,2l1.9-0.2c0,0.3,0.1,0.7,0.1,1  s0,0.7-0.1,1L49,32.8l-0.2,2l1.9,0.2c-0.3,2-0.9,3.9-1.8,5.6l-1.7-1l-1,1.7l1.7,1C46.8,44,45.5,45.5,44,46.8z"}),r.a.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",width:"50%",height:"50%",x:"25%",y:"25%",viewBox:"0 0 24 24",fill:"none",stroke:c,strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},r.a.createElement("circle",{cx:"12",cy:"12",r:"10"}),r.a.createElement("line",{x1:"12",y1:"16",x2:"12",y2:"12"}),r.a.createElement("line",{x1:"12",y1:"8",x2:"12.01",y2:"8"}))))},N=a(53),C=a(247),k=a(63);var S=Object(j.b)((function(e,t){return Object(o.a)({},t,{user:e.user,authed:e.authed})}))(Object(k.g)((function(e){var t=Object(n.useState)(!1),a=Object(s.a)(t,2),c=a[0],l=a[1],o=Object(n.useState)(!1),j=Object(s.a)(o,2),k=j[0],S=j[1],_=Object(N.useMediaQuery)({query:"(max-device-width: 1024px)"});Object(n.useEffect)((function(){if(_)return e.history.listen((function(){S(!1)}))}));var T=function(){return r.a.createElement(r.a.Fragment,null,r.a.createElement(i.a,{bg:"dark",className:"flex-column p-0"},r.a.createElement(i.a.Brand,{className:"mr-0 text-white h6 px-3 d-flex flex-column align-items-center bg-transparent border-0 hover-spinner",as:"Button",onClick:function(){return l(!0)}},r.a.createElement(O,{color:"lime",size:50}),"COVinfo"),r.a.createElement(i.a.Collapse,{id:"basic-navbar-nav",className:"flex-column w-100"},r.a.createElement(u.a,{className:"flex-column w-100 flex"},r.a.createElement(x.b,{to:"/",exact:!0,activeClassName:"current",className:"text-center py-3 w-100 nav-item"},r.a.createElement(p.a,{size:35})),r.a.createElement(x.b,{to:"/map",activeClassName:"current",className:"text-center py-3 w-100 nav-item"},r.a.createElement(f.a,{size:35})),r.a.createElement(x.b,{to:"/chat",activeClassName:"current",className:"text-center py-3 w-100 nav-item"},r.a.createElement(h.a,{size:35})),r.a.createElement(x.b,{to:"/music",activeClassName:"current",className:"text-center py-3 w-100 nav-item"},r.a.createElement(g.a,{size:35})),r.a.createElement(x.b,{to:"/memes",activeClassName:"current",className:"text-center py-3 w-100 nav-item"},r.a.createElement(b.a,{size:35})),r.a.createElement("div",{className:"flex"}),e.authed?r.a.createElement(x.b,{to:"/settings",activeClassName:"current",className:"text-center py-3 w-100 nav-item"},r.a.createElement(E.a,{size:35})):r.a.createElement(x.b,{to:"/login",activeClassName:"current",className:"text-center py-3 w-100 nav-item"},r.a.createElement(v.a,{size:35}))))),r.a.createElement(m.a,{show:c,onHide:function(){return l(!1)}},r.a.createElement(m.a.Header,{closeButton:!0},r.a.createElement(m.a.Title,null,"About COVinfo")),r.a.createElement(m.a.Body,null,"COVinfo was designed and built during the 2020 Corona pandemic and an entry in"," ",r.a.createElement("a",{href:"https://hackquarantine.devpost.com/",target:"_blank",rel:"noopener noreferrer"},"Hack Quarantine"),". The goal of COVinfo is to provide a one-stop-shop dashboard for important information regarding Corona, whether that includes up-to-date news, globally and locally, a visual representation of the global spread of Corona, or some materials to keep you distracted and staying healthy during these difficult times. COVinfo was built by"," ",r.a.createElement("a",{href:"https://ngregrichardson.dev",target:"_blank",rel:"noopener noreferrer"},"Noah Richardson")," ","and"," ",r.a.createElement("a",{href:"http://mayajohn.info",target:"_blank",rel:"noopener noreferrer"},"Maya John")," ","and is completely open sourced on"," ",r.a.createElement("a",{href:"https://github.com/ngregrichardson/COVinfo",target:"_blank",rel:"noopener noreferrer"},"Github"),"."),r.a.createElement(m.a.Body,null,r.a.createElement("strong",null,"Built with:"),r.a.createElement("br",null),"Front-End:"," ",r.a.createElement("a",{href:"https://reactjs.org/",target:"_blank",rel:"noopener noreferrer"},"React"),r.a.createElement("br",null),"Back-End:"," ",r.a.createElement("a",{href:"https://expressjs.com/",target:"_blank",rel:"noopener noreferrer"},"Express"),r.a.createElement("br",null),"Maps:"," ",r.a.createElement("a",{href:"https://www.mapbox.com/",target:"_blank",rel:"noopener noreferrer"},"Mapbox"),r.a.createElement("br",null),"Data Sources:"," ",r.a.createElement("a",{href:"https://newsapi.org/",target:"_blank",rel:"noopener noreferrer"},"News API"),","," ",r.a.createElement("a",{href:"https://corona.lmao.ninja/",target:"_blank",rel:"noopener noreferrer"},"NovelCOVID"),","," ",r.a.createElement("a",{href:"https://datahub.io/core/geo-countries",target:"_blank",rel:"noopener noreferrer"},"DataHub"))))};return _?r.a.createElement(r.a.Fragment,null,r.a.createElement(C.a,{isOpen:k,from:"left",width:"25%",onRequestClose:function(){return S(!k)},className:"bg-dark navbarZIndex",overlayClassName:"navbarOverlayZIndex",closeIcon:r.a.createElement("div",null)},T()),r.a.createElement(d.a,{className:"align-self-start position-absolute",style:{zIndex:50,left:10,top:10,border:k?"none":"solid 2px rgba(0, 0, 0, 0.5)",backgroundColor:k?"transparent":"rgba(0, 0, 0, 0.1)"},onClick:function(){return S(!k)}},k?r.a.createElement(y.a,{className:"text-white-50"}):r.a.createElement(w.a,{className:"text-black-50"}))):T()}))),_=a(141),T=a(56),D=a(22),I={id:"data",type:"fill",paint:{"fill-color":{property:"cases",stops:[[0,"#abdda4"],[10,"#e6f598"],[100,"#ffffbf"],[1e3,"#fee08b"],[1e4,"#fdae61"],[1e5,"#f46d43"],[1e6,"#d53e4f"]]},"fill-opacity":.8}};function L(e){return e.toString().replace(/\B(?=(\d{3})+(?!\d))/g,",")}var U=Object(j.b)((function(e,t){return Object(o.a)({},t,{user:e.user,authed:e.authed})}))((function(e){var t=Object(n.useState)({width:"100%",height:"100%",latitude:39.9526,longitude:-75.1652,zoom:5}),a=Object(s.a)(t,2),c=a[0],l=a[1],i=Object(n.useState)(null),u=Object(s.a)(i,2),m=u[0],d=u[1],p=Object(n.useState)(null),f=Object(s.a)(p,2),h=f[0],g=f[1],b=Object(n.useState)(!0),E=Object(s.a)(b,2),v=E[0],y=E[1],w=Object(N.useMediaQuery)({query:"(max-device-width: 1024px)"}),x=Object(D.useToasts)().addToast;return window.onresize=function(){l(Object(o.a)({},c,{width:"100%",height:"100%"}))},Object(n.useEffect)((function(){document.title="Map | COVinfo",fetch("https://covinfo.tech/mapData").then((function(e){return e.json()})).then((function(t){var a=t.geoJson;t.coronaJson.forEach((function(t){var n=a.features.find((function(e){return e.properties.ISO_A3===t.countryInfo.iso3}));n&&(n.properties=Object(o.a)({},n.properties,{cases:t.cases,deaths:t.deaths,recovered:t.recovered,casesToday:t.todayCases,tests:t.tests,iso2:t.countryInfo.iso2}),e.authed&&e.user&&(e.user.country!==t.countryInfo.iso2&&e.user.country!==t.countryInfo.iso3||l(Object(o.a)({},c,{latitude:t.countryInfo.lat,longitude:t.countryInfo.long}))))})),d(a),setTimeout((function(){return y(!1)}),1e3)})).catch((function(e){console.log(e),y(!1),x("There was a problem loading the data",{appearance:"error",autoDismiss:!0})}))}),[]),r.a.createElement("div",{style:{flex:1,position:"relative"}},v?r.a.createElement("div",{className:"map-loading"},r.a.createElement(O,{color:"lime",size:100,className:"spinning-logo"})):null,r.a.createElement(_.c,Object.assign({mapboxApiAccessToken:"pk.eyJ1IjoibmdyZWdyaWNoYXJkc29uIiwiYSI6ImNrOHY0dGdsdjA2NjYzZnNmMWVzZW53OGQifQ.OLl9xQNCBOTHwVRlz-06lA"},c,{onViewportChange:l,mapStyle:"mapbox://styles/mapbox/dark-v9",onHover:function(e){var t=e.features,a=t&&t.find((function(e){return"data"===e.layer.id}));g(a)}}),r.a.createElement(_.b,{type:"geojson",data:m},r.a.createElement(_.a,I)),h?r.a.createElement("div",{className:w?"small-map-tooltip":"map-tooltip"},r.a.createElement("div",{className:"d-flex flex-row align-items-center"},r.a.createElement("div",{className:"font-weight-bold"},h.properties.ADMIN),h.properties.iso2?r.a.createElement(T.a,{countryCode:h.properties.iso2,className:"ml-1"}):null),r.a.createElement("div",{style:{width:"100%",height:1,backgroundColor:"#fff"}}),void 0!==h.properties.cases?r.a.createElement("div",null,"Total Cases: ",L(h.properties.cases)):null,void 0!==h.properties.deaths?r.a.createElement("div",null,"Deaths: ",L(h.properties.deaths)):null,void 0!==h.properties.recovered?r.a.createElement("div",null,"Recoveries: ",L(h.properties.recovered)):null,void 0!==h.properties.tests?r.a.createElement("div",null,"Tests: ",L(h.properties.tests)):null,void 0===h.properties.casesToday||0===h.properties.casesToday?null:r.a.createElement("div",null,"Cases Today:"," ",L(h.properties.casesToday)),r.a.createElement("div",{style:{color:"gray",fontSize:"0.8em"}},"Data Provided by"," ",r.a.createElement("a",{href:"https://github.com/NovelCOVID/API",target:"_blank",rel:"noopener noreferrer"},"NovelCOVID"))):null))})),A=a(29),R=a.n(A);var B=function(e){var t=Object(n.useState)(e.article),a=Object(s.a)(t,1)[0];return r.a.createElement("button",{className:"p-2 text-white d-flex flex-row align-items-center mb-3 text-left w-100 bg-transparent border newsStory",style:{borderRadius:10,borderColor:"lightgray"},onClick:function(){window.open(a.url,"_blank")}},r.a.createElement("img",{src:a.urlToImage||"https://designshack.net/wp-content/uploads/placeholder-image.png",width:70,height:70,style:{borderRadius:5,objectFit:"cover"},alt:"article_img"}),r.a.createElement("div",{className:"d-flex flex-column justify-content-center ml-3"},r.a.createElement("h5",{className:"mb-0 text-dark"},a.title),r.a.createElement("span",{className:"ml-2 h6 text-black-50"},a.source.name," \xb7",a.author&&""!==a.author.trim()?" ".concat(a.author," \xb7 "):" ",R()(a.publishedAt).fromNow())))},M=a(58),P=a(80);var z=Object(j.b)((function(e,t){return Object(o.a)({},t,{user:e.user,authed:e.authed})}))((function(e){var t=Object(n.useState)({articles:[],loading:!0}),a=Object(s.a)(t,2),c=a[0],l=a[1],i=Object(n.useState)({articles:[],loading:!0,title:"Local Coronavirus News"}),u=Object(s.a)(i,2),m=u[0],d=u[1],p=Object(n.useState)(e.authed),f=Object(s.a)(p,2),h=f[0],g=f[1],b=Object(D.useToasts)().addToast,E=Object(N.useMediaQuery)({query:"(max-device-width: 1024px)"});Object(n.useEffect)((function(){e.authed!==h&&(g(e.authed),d(Object(o.a)({},m,{loading:!0})))}),[e.authed]);var v=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";return new Promise((function(t,a){e=" "+Object(P.getName)(e),fetch("https://newsapi.org/v2/everything?q=coronavirus".concat(e,"&from=").concat(R()().subtract(14,"days").format("YYYY-MM-DD"),"&sortBy=relevancy&language=en&apiKey=a24bf4b7cea34b6c88e899238f856cfa")).then((function(e){return e.json()})).then((function(e){"error"!==e.status?t(e.articles):a("There was a problem getting the news.")})).catch((function(e){a("There was a problem getting the news.")}))}))};return Object(n.useEffect)((function(){document.title="Dashboard | COVinfo",v().then((function(e){l({articles:e,loading:!1})})),function(){if(h&&e.user){var t=e.user;v(t.country).then((function(e){d({articles:e,loading:!1,title:"Local Coronavirus News (".concat(t.country,")"),country:t.country})})).catch((function(e){return b(e,{appearance:"error",autoDismiss:!0})}))}else v("United States of America").then((function(e){d({articles:e,loading:!1,title:"Local Coronavirus News (US)",country:"US"})})).catch((function(e){return b(e,{appearance:"error",autoDismiss:!0})}))}()}),[]),r.a.createElement("div",{className:E?"d-flex flex-column flex p-3":"d-flex flex-row flex p-3"},r.a.createElement("div",{className:"d-flex flex-column flex"},r.a.createElement("h3",{className:E?"ml-2 align-self-center":"ml-2"},"Global Coronavirus News"),r.a.createElement("div",{className:"p-1 flex d-flex flex-column align-items-center ".concat(m.loading?"justify-content-center":"")},r.a.createElement(M.Scrollbars,{renderView:function(e){return r.a.createElement("div",Object.assign({},e,{className:"pr-3 flex d-flex flex-column align-items-center ".concat(c.loading?"justify-content-center":"")}))}},c.loading?r.a.createElement(O,{color:"lime",size:100,className:"spinning-logo"}):c.articles.map((function(e){return e.title&&""!==e.title.trim()?r.a.createElement(B,{article:e,key:e.publishedAt+e.title+"".concat(5*Math.random())}):null}))))),r.a.createElement("div",{className:"d-flex flex-column flex"},r.a.createElement("div",{className:E?"ml-2 d-flex flex-row align-items-center mb-2 justify-content-center":"ml-2 d-flex flex-row align-items-center mb-2"},r.a.createElement("h3",{className:"m-0"},m.title),r.a.createElement(T.a,{countryCode:m.country,className:"ml-1"})),r.a.createElement("div",{className:"p-1 flex d-flex flex-column align-items-center ".concat(m.loading?"justify-content-center":"")},r.a.createElement(M.Scrollbars,{renderView:function(e){return r.a.createElement("div",Object.assign({},e,{className:"pr-3 flex d-flex flex-column align-items-center ".concat(m.loading?"justify-content-center":"")}))}},m.loading?r.a.createElement(O,{color:"lime",size:100,className:"spinning-logo"}):m.articles.map((function(e){return e.title&&""!==e.title.trim()?r.a.createElement(B,{article:e,key:e.publishedAt+e.title+"".concat(5*Math.random())}):null}))))))})),V=a(269),G=a(538);var W=function(e){return r.a.createElement("div",{className:"mb-2 chatMessage bg-white p-2"},r.a.createElement("div",{className:"d-flex flex-row align-items-center mb-1"},r.a.createElement("h6",{style:{color:"#"+e.message.username_color},className:"mb-0 font-weight-bold"},e.message.username),r.a.createElement(T.a,{countryCode:e.message.country,className:"ml-1"})),r.a.createElement("span",{className:"ml-2"},e.message.message))},q=a(254),F=a.n(q)()("https://covinfo.tech/");var H=Object(j.b)((function(e,t){return Object(o.a)({},t,{user:e.user,authed:e.authed})}))((function(e){var t=Object(n.useState)(""),a=Object(s.a)(t,2),c=a[0],l=a[1],o=Object(n.useState)([]),i=Object(s.a)(o,2),u=i[0],m=i[1],d=Object(n.useRef)(u),p=Object(n.useRef)(null),f=Object(N.useMediaQuery)({query:"(max-device-width: 1024px)"}),h=Object(D.useToasts)().addToast;Object(n.useEffect)((function(){d.current=u}));var g=function(e){m([].concat(Object(V.a)(d.current),[e])),b()};Object(n.useEffect)((function(){return document.title="Chat | COVinfo",F.on("message",g),function(){F.off("message")}}),[]);var b=function(){p.current.scrollToBottom()},E=function(){fetch(encodeURI("".concat("https://covinfo.tech/","chat/sendMessage?message=").concat(c,"&username=").concat(e.user.username,"&username_color=").concat(e.user.username_color,"&country=").concat(e.user.country)),{method:"POST"}).then((function(e){l("")})).catch((function(e){console.log(e),h("There was a problem sending the message.",{appearance:"error",autoDismiss:!0})}))};return r.a.createElement("div",{className:"w-100 h-100 d-flex flex-column"},r.a.createElement("div",{className:"flex pl-3 pt-3 pr-3 d-flex flex-column"},r.a.createElement("h3",{className:f?"align-self-center":""},"Quarantine Chat"),r.a.createElement(M.Scrollbars,{renderView:function(e){return r.a.createElement("div",Object.assign({},e,{className:"pr-3 flex"}))},ref:p},u.map((function(e){return r.a.createElement(W,{message:e,key:"".concat(e.username,"_").concat(10*Math.random())})})))),r.a.createElement("div",{className:"w-100 p-3"},r.a.createElement("div",{className:"w-100 d-flex flex-row rounded-pill messageInputContainer"},r.a.createElement("input",{type:"text",className:"flex bg-transparent border-0 py-2 px-3 messageInput",placeholder:e.authed?"Message...":"Login to enable chat...",onChange:function(e){return l(e.target.value)},onKeyDown:function(e){13===e.keyCode&&E()},value:c,disabled:!e.authed}),""!==c.trim()?r.a.createElement("button",{className:"bg-primary border-0 d-flex align-items-center justify-content-center pl-3 pr-4",style:{borderTopRightRadius:100,borderBottomRightRadius:100},onClick:E},r.a.createElement(G.a,{color:"white"})):r.a.createElement("div",null))))})),Q=a(14),Z=a.n(Q),Y=a(539),K=a(540),J=a(553);var X=function(){var e=Object(n.useState)(""),t=Object(s.a)(e,2),a=t[0],c=t[1],l=Object(n.useState)(""),o=Object(s.a)(l,2),i=o[0],u=o[1],m=Object(k.f)(),d=Object(D.useToasts)().addToast;return r.a.createElement("div",{className:"w-100 h-100 d-flex align-items-center justify-content-center offWhiteBackground"},r.a.createElement("div",{className:"bg-white d-flex flex-column align-items-center form-padding rounded boxShadow"},r.a.createElement("h3",null,"Log in"),r.a.createElement("div",{style:{height:1,width:"25%",backgroundColor:"gray"}}),r.a.createElement("div",{className:"d-flex flex-row align-items-center justify-content-center p-3"},r.a.createElement("button",{className:"smLoginButton bg-white rounded-circle p-2 d-flex align-items-center justify-content-center mx-2",onClick:function(){Z.a.auth().signInWithPopup(new Z.a.auth.FacebookAuthProvider).then().then((function(e){m.push("/"),d("Logged in.",{appearance:"success",autoDismiss:!0})})).catch((function(e){console.log(e),d("There was a problem logging in.",{appearance:"error",autoDismiss:!0})}))}},r.a.createElement(Y.a,null)),r.a.createElement("button",{className:"smLoginButton bg-white rounded-circle p-2 d-flex align-items-center justify-content-center mx-2",onClick:function(){Z.a.auth().signInWithPopup(new Z.a.auth.GithubAuthProvider).then().then((function(e){m.push("/"),d("Logged in.",{appearance:"success",autoDismiss:!0})})).catch((function(e){console.log(e),d("There was a problem logging in.",{appearance:"error",autoDismiss:!0})}))}},r.a.createElement(K.a,null))),r.a.createElement("span",{className:"mb-2 text-muted"},"or use your email"),r.a.createElement(J.a,null,r.a.createElement(J.a.Group,{controlId:"formGroupEmail"},r.a.createElement(J.a.Label,null,"Email address"),r.a.createElement(J.a.Control,{type:"email",placeholder:"Email...",value:a,onChange:function(e){return c(e.target.value)}})),r.a.createElement(J.a.Group,{controlId:"formGroupPassword"},r.a.createElement(J.a.Label,null,"Password"),r.a.createElement(J.a.Control,{type:"password",placeholder:"Password...",value:i,onChange:function(e){return u(e.target.value)}})),r.a.createElement("button",{className:"bg-transparent border-0 float-right align-self-end mb-3"},"Forgot Password?")),r.a.createElement("button",{className:"bg-white smLoginButton rounded-pill py-2 px-3",onClick:function(){Z.a.auth().signInWithEmailAndPassword(a,i).then((function(e){m.push("/"),d("Logged in.",{appearance:"success",autoDismiss:!0})})).catch((function(e){console.log(e),d("There was a problem logging in.",{appearance:"error",autoDismiss:!0})}))}},"Log in"),r.a.createElement("button",{className:"bg-white smLoginButton rounded-pill py-2 px-3 mt-3",onClick:function(){m.push("/register")}},"Register")))},$=a(123),ee={user:null,authed:!1},te=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:ee,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"UPDATE_USER":return Object(o.a)({},e,{user:t.user,authed:!0});case"CLEAR_USER":return Object(o.a)({},e,{user:null,authed:!1});default:return e}},ae=Object($.b)(te,window.__REDUX_DEVTOOLS_EXTENSION__&&window.__REDUX_DEVTOOLS_EXTENSION__()),ne=a(541),re=a(542);var ce=function(){var e=Object(n.useState)(""),t=Object(s.a)(e,2),a=t[0],c=t[1],l=Object(n.useState)(""),o=Object(s.a)(l,2),i=o[0],u=o[1],m=Object(n.useState)(""),d=Object(s.a)(m,2),p=d[0],f=d[1],h=Object(n.useState)(""),g=Object(s.a)(h,2),b=g[0],E=g[1],v=Object(n.useState)("US"),y=Object(s.a)(v,2),w=y[0],x=y[1],j=Object(P.getData)(),O=Object(D.useToasts)().addToast,N=Object(k.f)(),C=function(e){Z.a.firestore().collection("users").doc(e).set({username:b,country:w,username_color:"000000",user_id:e}).then((function(){N.push("/"),O("User created.",{appearance:"success",autoDismiss:!0})})).catch((function(e){console.log(e),O("There was a problem creating the user.",{appearance:"error",autoDismiss:!0})}))};return r.a.createElement("div",{className:"w-100 h-100 d-flex align-items-center justify-content-center offWhiteBackground"},r.a.createElement("div",{className:"bg-white d-flex flex-column align-items-center p-5 rounded boxShadow"},r.a.createElement("h3",null,"Register"),r.a.createElement("div",{style:{height:1,width:"15%",backgroundColor:"gray",marginBottom:15}}),r.a.createElement(ne.a,{defaultActiveKey:"email",id:"registerTabs"},r.a.createElement(re.a,{eventKey:"email",title:"Email",className:"mt-2"},r.a.createElement("div",{className:"d-flex flex-column align-items-center"},r.a.createElement(J.a,null,r.a.createElement(J.a.Group,{controlId:"emailUsername"},r.a.createElement(J.a.Label,null,"Username"),r.a.createElement(J.a.Control,{type:"text",placeholder:"Username...",value:b,onChange:function(e){return E(e.target.value)}})),r.a.createElement(J.a.Group,{controlId:"emailCountry"},r.a.createElement(J.a.Label,null,"Country"),r.a.createElement(J.a.Control,{as:"select",value:w,onChange:function(e){return x(e.target.value)}},j.map((function(e){return r.a.createElement("option",{key:e.code,value:e.code},e.name)})))),r.a.createElement(J.a.Group,{controlId:"emailEmail"},r.a.createElement(J.a.Label,null,"Email address"),r.a.createElement(J.a.Control,{type:"email",placeholder:"Email...",value:a,onChange:function(e){return c(e.target.value)}})),r.a.createElement(J.a.Group,{controlId:"emailPassword"},r.a.createElement(J.a.Label,null,"Password"),r.a.createElement(J.a.Control,{type:"password",placeholder:"Password...",value:i,onChange:function(e){return u(e.target.value)}})),r.a.createElement(J.a.Group,{controlId:"emailConfirmPassword"},r.a.createElement(J.a.Label,null,"Confirm Password"),r.a.createElement(J.a.Control,{type:"password",placeholder:"Confirm Password...",value:p,onChange:function(e){return f(e.target.value)}}))),r.a.createElement("button",{className:"bg-white smLoginButton rounded-pill py-2 px-3",onClick:function(){return""===b.trim()?O("A valid username is required.",{appearance:"error",autoDismiss:!0}):""!==a.trim()&&/^(([^<>()[\]\\.,;:\s@"]+(\.[^<>()[\]\\.,;:\s@"]+)*)|(".+"))@((\[[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}])|(([a-zA-Z\-0-9]+\.)+[a-zA-Z]{2,}))$/.test(String(a).toLowerCase())?""===i.trim()||""===p.trim()?O("A valid password is required.",{appearance:"error",autoDismiss:!0}):i!==p?O("Passwords do not match",{appearance:"error",autoDismiss:!0}):void Z.a.auth().createUserWithEmailAndPassword(a,i).then((function(e){C(e.user.uid)})).catch((function(e){console.log(e),O("There was a problem creating the user.",{appearance:"error",autoDismiss:!0})})):O("A valid email is required.",{appearance:"error",autoDismiss:!0})}},"Register"))),r.a.createElement(re.a,{eventKey:"facebook",title:"Facebook",className:"mt-2"},r.a.createElement("div",{className:"d-flex flex-column align-items-center"},r.a.createElement(J.a,null,r.a.createElement(J.a.Group,{controlId:"facebookUsername"},r.a.createElement(J.a.Label,null,"Create Username"),r.a.createElement(J.a.Control,{type:"text",placeholder:"Create Username...",value:b,onChange:function(e){return E(e.target.value)}})),r.a.createElement(J.a.Group,{controlId:"facebookCountry"},r.a.createElement(J.a.Label,null,"Country"),r.a.createElement(J.a.Control,{as:"select",value:w,onChange:function(e){return x(e.target.value)}},j.map((function(e){return r.a.createElement("option",{key:e.code,value:e.code},e.name)}))))),r.a.createElement("button",{className:"bg-white smLoginButton rounded-pill py-2 px-3",onClick:function(){if(""===b.trim())return O("A valid username is required.",{appearance:"error",autoDismiss:!0});Z.a.auth().signInWithPopup(new Z.a.auth.FacebookAuthProvider).then().then((function(e){C(e.user.uid)})).catch((function(e){console.log(e),O("There was a problem creating the user.",{appearance:"error",autoDismiss:!0})}))}},r.a.createElement(Y.a,null)," Register"))),r.a.createElement(re.a,{eventKey:"github",title:"Github",className:"mt-2"},r.a.createElement("div",{className:"d-flex flex-column align-items-center"},r.a.createElement(J.a,null,r.a.createElement(J.a.Group,{controlId:"githubUsername"},r.a.createElement(J.a.Label,null,"Create Username"),r.a.createElement(J.a.Control,{type:"text",placeholder:"Create Username...",value:b,onChange:function(e){return E(e.target.value)}})),r.a.createElement(J.a.Group,{controlId:"githubCountry"},r.a.createElement(J.a.Label,null,"Country"),r.a.createElement(J.a.Control,{as:"select",value:w,onChange:function(e){return x(e.target.value)}},j.map((function(e){return r.a.createElement("option",{key:e.code,value:e.code},e.name)}))))),r.a.createElement("button",{className:"bg-white smLoginButton rounded-pill py-2 px-3",onClick:function(){if(""===b.trim())return O("A valid username is required.",{appearance:"error",autoDismiss:!0});Z.a.auth().signInWithPopup(new Z.a.auth.GithubAuthProvider).then().then((function(e){C(e.user.uid)})).catch((function(e){console.log(e),O("There was a problem creating the user.",{appearance:"error",autoDismiss:!0})}))}},r.a.createElement(K.a,null)," Register"))))))},le=a(255),oe=a(543);var se=Object(j.b)((function(e,t){return Object(o.a)({},t,{user:e.user})}),(function(e){return{updateUser:function(t){return e({type:"UPDATE_USER",user:t})}}}))((function(e){var t=Object(n.useState)(e.user?e.user.username:""),a=Object(s.a)(t,2),c=a[0],l=a[1],i=Object(n.useState)(e.user?e.user.country:""),u=Object(s.a)(i,2),m=u[0],d=u[1],p=Object(n.useState)(e.user?e.user.username_color:"ffffff"),f=Object(s.a)(p,2),h=f[0],g=f[1],b=Object(n.useState)({}),E=Object(s.a)(b,2),v=E[0],y=E[1],w=Object(n.useState)(!1),x=Object(s.a)(w,2),j=x[0],N=x[1],C=Object(n.useState)(!0),S=Object(s.a)(C,2),_=S[0],T=S[1],I=Object(P.getData)(),L=Object(k.f)(),U=Object(D.useToasts)().addToast;Object(n.useEffect)((function(){e.user&&(T(!1),e.user.username!==c&&l(e.user.username),e.user.country!==m&&d(e.user.country),e.user.username_color!==h&&g(e.user.username_color))}),[e.user,c,l,m,d,h,g]);var A=function(e,t){var a=v;a[e]=t,y(a)},R=function(){N(!j)};return r.a.createElement("div",{className:"w-100 h-100 d-flex align-items-center justify-content-center offWhiteBackground position-relative"},_?r.a.createElement("div",{style:{position:"absolute",left:0,right:0,top:0,bottom:0,backgroundColor:"rgba(255, 255, 255, 0.4)"},className:"d-flex align-items-center justify-content-center"},r.a.createElement(O,{color:"lime",size:100,className:"spinning-logo"})):null,r.a.createElement("div",{className:"bg-white d-flex flex-column align-items-center p-5 rounded boxShadow"},r.a.createElement("h3",null,"Settings"),r.a.createElement("div",{style:{height:1,width:"25%",backgroundColor:"gray"}}),r.a.createElement(J.a,null,r.a.createElement(J.a.Group,{controlId:"settingsUsername"},r.a.createElement(J.a.Label,null,"Username"),r.a.createElement(J.a.Control,{type:"text",placeholder:"Username...",value:v.username||c,onChange:function(e){l(e.target.value),A("username",e.target.value)}})),r.a.createElement(J.a.Group,{controlId:"settingsCountry"},r.a.createElement(J.a.Label,null,"Country"),r.a.createElement(J.a.Control,{as:"select",value:v.country||m,onChange:function(e){d(e.target.value),A("country",e.target.value)}},I.map((function(e){return r.a.createElement("option",{key:e.code,value:e.code},e.name)})))),r.a.createElement(J.a.Group,{controlId:"settingsColor"},r.a.createElement("div",{className:"d-flex flex-row align-items-center justify-content-center"},r.a.createElement("div",{className:"rounded mr-2 position-relative",style:{width:30,height:30,backgroundColor:"#".concat(v.username_color||h)}},r.a.createElement("div",{style:{cursor:"pointer",width:30,height:30},onClick:function(e){e.preventDefault(),R()}}),j?r.a.createElement("div",{style:{position:"absolute",left:"-20%",top:"130%"}},r.a.createElement("div",{style:{position:"fixed",top:0,bottom:0,left:0,right:0},onClick:R}),r.a.createElement(le.TwitterPicker,{color:"#".concat(v.username_color||h),onChangeComplete:function(e){g(e.hex.split("#")[1]),A("username_color",e.hex.split("#")[1]),R()}})):null),r.a.createElement("h6",{className:"mb-0"},"Username Color")))),r.a.createElement("button",{className:"bg-white smLoginButton rounded-pill py-2 px-3 ".concat(0===Object.keys(v).length?"fullButton":""),onClick:function(){Z.a.firestore().collection("users").doc(e.user.user_id).update(v).then((function(){e.updateUser(Object(o.a)({},e.user,{},v)),y({}),U("User saved.",{appearance:"success",autoDismiss:!0})})).catch((function(e){console.log(e),U("There was a problem saving the user.",{appearance:"error",autoDismiss:!0})}))},disabled:0===Object.keys(v).length},"Save User"),r.a.createElement("button",{className:"bg-white smLoginButton rounded-pill py-2 px-3 text-danger mt-2",onClick:function(){Z.a.auth().signOut().then((function(){L.push("/"),U("Logged out.",{appearance:"success",autoDismiss:!0})})).catch((function(e){console.log(e),U("There was a problem logging out.",{appearance:"error",autoDismiss:!0})}))}},r.a.createElement(oe.a,null)," Log Out")))})),ie=a(84),ue=a.n(ie),me=a(133),de=function(e){return new Promise((function(t,a){fetch("https://www.googleapis.com/youtube/v3/search?key=".concat("AIzaSyCBuW_IWsZ1biICjlWto_ySrSBiH8e0ZkA","&part=snippet&videoEmbeddable=true&q=").concat(encodeURI(e),"&type=video&videoCategoryId=10"),{headers:{Accept:"application/json"}}).then((function(e){return e.json()})).then((function(e){e.items?t(e.items):a("No videos found")})).catch((function(e){return a(e)}))}))},pe=a(256),fe=a.n(pe),he=a(544),ge=a(545),be=a(547),Ee=a(548),ve=a(549),ye=a(550),we=a(554),xe=a(257),je=a.n(xe),Oe=a(136);var Ne=Object(j.b)((function(e,t){return Object(o.a)({},t,{user:e.user,authed:e.authed})}))((function(e){var t=Object(n.useState)(""),a=Object(s.a)(t,2),c=a[0],l=a[1],i=Object(n.useState)([]),u=Object(s.a)(i,2),p=u[0],f=u[1],h=Object(n.useState)([]),g=Object(s.a)(h,2),b=g[0],E=g[1],v=Object(n.useState)(!0),y=Object(s.a)(v,2),w=y[0],x=y[1],j=Object(n.useState)(!1),N=Object(s.a)(j,2),C=N[0],k=N[1],S=Object(n.useState)(!1),_=Object(s.a)(S,2),I=_[0],L=_[1],U=Object(n.useState)(null),A=Object(s.a)(U,2),B=A[0],P=A[1],z=Object(n.useState)("00:00:00"),V=Object(s.a)(z,2),G=V[0],W=V[1],q=Object(n.useState)("popular"),F=Object(s.a)(q,2),H=F[0],Q=F[1],Y=Object(Oe.a)({query:"(max-device-width: 1024px)"}),K=Object(D.useToasts)().addToast;Object(n.useEffect)((function(){document.title="Music | COVinfo",Z.a.firestore().collection("songs").get().then((function(e){var t=[];e.forEach((function(e){return t.push(e.data())})),E($(t)),x(!1),k(!C)})).catch((function(e){console.log(e),K("There was a problem loading the songs.",{appearance:"error",autoDismiss:!0})}))}),[]);var X=function(){var e=Object(me.a)(ue.a.mark((function e(t){return ue.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:H!==t&&(Q(t),E($(b,t)),k(!C),K("Filtering by ".concat(t,"."),{appearance:"success",autoDismiss:!0}));case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),$=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:H;switch(t){case"recent":e.sort((function(e,t){return R()(t.created_at)-R()(e.created_at)}));break;default:e.sort((function(e,t){return t.upvotes.length-e.upvotes.length}))}return e},ee=function(){""!==c.trim()?de(c).then((function(e){f(e),L(!0)})).catch((function(e){console.log(e),K("There was a problem searching YouTube.",{appearance:"error",autoDismiss:!0})})):f([])},te=function(){var e=G.split(":"),t=parseInt(e[0]),a=parseInt(e[1]),n=parseInt(e[2]);return R.a.duration(t,"hours").asSeconds()+R.a.duration(a,"minutes").asSeconds()+n},ae=function(){L(!1),W("00:00:00"),P(null),f([])};return r.a.createElement("div",{className:"w-100 h-100 d-flex flex-column"},r.a.createElement(m.a,{show:I,onHide:ae},r.a.createElement(m.a.Header,{closeButton:!0},r.a.createElement(m.a.Title,null,"Suggest A Song")),r.a.createElement(m.a.Body,null,r.a.createElement("div",null,p.map((function(e){return r.a.createElement("button",{className:"w-100 border-0 ".concat(B&&e.id.videoId===B.id.videoId?"border-info":"bg-transparent"),onClick:function(){return P(e)}},r.a.createElement("div",{className:"d-flex flex flex-row align-items-center my-2"},r.a.createElement("img",{src:e.snippet.thumbnails.default.url,width:e.snippet.thumbnails.default.width*(2/3),height:e.snippet.thumbnails.default.height*(2/3),alt:"thumbnail"}),r.a.createElement("div",{className:"ml-2 text-left"},r.a.createElement("h5",{className:"mb-0 text-dark"},e.snippet.title.replace(/&#(\d+);/g,(function(e,t){return String.fromCharCode(t)}))),r.a.createElement("span",{className:"ml-2 h6 text-black-50"},e.snippet.channelTitle," \xb7",R()(e.snippet.publishedAt).fromNow()))))}))),r.a.createElement(J.a.Group,null,r.a.createElement(J.a.Label,null,"Timestamp"),r.a.createElement(je.a,{mask:"99:99:99",defaultValue:G,onChange:function(e){return W(e.target.value)}},(function(e){return r.a.createElement(J.a.Control,Object.assign({type:"text"},e))})))),r.a.createElement(m.a.Footer,null,r.a.createElement(d.a,{variant:"primary",className:"d-flex flex-row align-items-center",onClick:function(){if(null!==B){var t={url:"https://youtube.com/watch?v=".concat(B.id.videoId),title:B.snippet.title,seconds:te(),created_at:R()().toISOString(),upvotes:[],user:e.user,song_id:""};Z.a.firestore().collection("songs").add(t).then((function(e){Z.a.firestore().collection("songs").doc(e.id).update({song_id:e.id}).then((function(){var a=b;a.push(Object(o.a)({},t,{song_id:e.id})),E($(a)),l(""),ae(),K("Song added.",{appearance:"success",autoDismiss:!0})})).catch((function(e){console.log(e),K("There was a problem adding the song.",{appearance:"error",autoDismiss:!0})}))})).catch((function(e){console.log(e),K("There was a problem adding the song.",{appearance:"error",autoDismiss:!0})}))}}},r.a.createElement(he.a,{className:"mr-1"})," Suggest Song"))),r.a.createElement("div",{className:"w-100 px-3 mt-3 d-flex flex-column"},r.a.createElement("h3",{className:Y?"align-self-center":""},"Hand Washing Music"),r.a.createElement("div",{className:"w-100 d-flex flex-row rounded-pill messageInputContainer"},r.a.createElement("input",{type:"text",className:"flex bg-transparent border-0 py-2 px-3 messageInput",placeholder:e.authed?"Add song from YouTube...":"Login to enable adding songs...",onChange:function(e){return l(e.target.value)},disabled:!e.authed,onKeyDown:function(e){13===e.keyCode&&ee()},value:c}),""!==c.trim()?r.a.createElement("button",{className:"bg-primary border-0 d-flex align-items-center justify-content-center pl-3 pr-4",style:{borderTopRightRadius:100,borderBottomRightRadius:100},onClick:ee},r.a.createElement(ge.a,{color:"white"})):r.a.createElement("div",null))),w?r.a.createElement("div",{className:"d-flex align-items-center justify-content-center w-100 flex"},r.a.createElement(O,{color:"lime",size:100,className:"spinning-logo"})):r.a.createElement("div",{className:"h-100 p-3"},r.a.createElement(we.a,{className:"mb-3 d-flex justify-content-end"},r.a.createElement(we.a.Toggle,{variant:"light"},"Filter ",r.a.createElement(be.a,null)),r.a.createElement(we.a.Menu,null,r.a.createElement(we.a.Item,{onClick:function(){return X("popular")},style:{backgroundColor:"popular"===H?"lightgray":"white"}},r.a.createElement("div",{className:"d-flex flex-row align-items-center"},r.a.createElement("span",{className:"flex"},"Popular")," ",r.a.createElement(Ee.a,null))),r.a.createElement(we.a.Item,{onClick:function(){return X("recent")},style:{backgroundColor:"recent"===H?"lightgray":"white"}},r.a.createElement("div",{className:"d-flex flex-row align-items-center"},r.a.createElement("span",{className:"flex"},"Recent")," ",r.a.createElement(ve.a,null))))),r.a.createElement(M.Scrollbars,{hideTracksWhenNotNeeded:!0,renderView:function(e){return r.a.createElement("div",Object.assign({},e,{style:Object(o.a)({},e.style,{marginBottom:50})}))}},b.map((function(t){return r.a.createElement("div",{className:"border d-inline-block m-1 flex",style:{borderRadius:10,borderColor:"lightgray"},key:t.song_id},r.a.createElement(fe.a,{url:"".concat(t.url,"&t=").concat(t.seconds),controls:!1,className:"p-2",width:"100%"}),r.a.createElement("div",{style:{height:1,width:"100%",backgroundColor:"lightgray"}}),r.a.createElement("div",{className:Y?"p-2 d-flex flex-column justify-content-center":"p-2 d-flex flex-row align-items-center"},r.a.createElement("div",{className:"flex"},r.a.createElement("span",null,"Submitted by: "),r.a.createElement("span",{style:{color:"#".concat(t.user.username_color)}},t.user.username),r.a.createElement(T.a,{countryCode:t.user.country,className:"ml-1"})),r.a.createElement("div",{className:"d-flex flex-row align-items-center"},e.authed&&"admin"===e.user.type?r.a.createElement("button",{className:"bg-transparent border-0",onClick:function(){return e=t.song_id,void(window.confirm("Are you sure you want to delete that song?")&&Z.a.firestore().collection("songs").doc(e).delete().then((function(){E($(b.filter((function(t){return t.song_id!==e})))),k(!C),K("The song was deleted.",{appearance:"success",autoDismiss:!0})})).catch((function(e){console.log(e),K("There was a problem deleting the song.",{appearance:"error",autoDismiss:!0})})));var e}},r.a.createElement(ye.a,{className:"text-danger"})):null,r.a.createElement("span",null,"(",t.upvotes.length,")"),r.a.createElement("button",{className:"bg-transparent border-0",onClick:function(){return function(t){var a=b.findIndex((function(e){return e.song_id===t})),n=b[a].upvotes;n.includes(e.user.user_id)?n=n.filter((function(t){return t!==e.user.user_id})):n.push(e.user.user_id);var r=b;r[a]=Object(o.a)({},r[a],{upvotes:n}),Z.a.firestore().collection("songs").doc(t).update({upvotes:n}).then((function(){E($(r)),k(!C),K("Upvote toggled.",{appearance:"success",autoDismiss:!0})})).catch((function(e){console.log(e),K("There was a problem toggling the upvote.",{appearance:"error",autoDismiss:!0})}))}(t.song_id)},disabled:!e.authed,title:e.authed?null:"Login to enable upvoting"},r.a.createElement(Ee.a,{color:e.authed?t.upvotes.includes(e.user.user_id)?"gold":"black":"gray"})))))})))))})),Ce=a(551),ke=a(268),Se=a(266),_e=a.n(Se);var Te=Object(j.b)((function(e,t){return Object(o.a)({},t,{user:e.user,authed:e.authed})}))((function(e){var t=Object(n.useState)([]),a=Object(s.a)(t,2),c=a[0],l=a[1],i=Object(n.useState)(!0),u=Object(s.a)(i,2),p=u[0],f=u[1],h=Object(n.useState)(!1),g=Object(s.a)(h,2),E=g[0],v=g[1],y=Object(n.useState)(!1),w=Object(s.a)(y,2),x=w[0],j=w[1],N=Object(n.useState)(r.a.createElement(b.a,{size:100})),C=Object(s.a)(N,2),k=C[0],S=C[1],_=Object(n.useState)(!1),I=Object(s.a)(_,2),L=I[0],U=I[1],A=Object(n.useState)(null),B=Object(s.a)(A,2),P=B[0],z=B[1],V=Object(n.useState)("popular"),G=Object(s.a)(V,2),W=G[0],q=G[1],F=Object(n.useState)(0),H=Object(s.a)(F,2),Q=H[0],Y=H[1],K=Object(n.useState)(!1),J=Object(s.a)(K,2),X=J[0],$=J[1],ee=Object(n.useRef)(null),te=Object(Oe.a)({query:"(max-device-width: 1024px)"}),ae=Object(D.useToasts)().addToast;Object(n.useEffect)((function(){Z.a.firestore().collection("memes").get().then((function(e){var t=[];e.forEach((function(e){return t.push(e.data())})),l(re(t)),f(!1),v(!E)})).catch((function(e){console.log(e),ae("There was a problem loading the memes.",{appearance:"error",autoDismiss:!0})}))}),[]);var ne=function(){var e=Object(me.a)(ue.a.mark((function e(t){return ue.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:W!==t&&(q(t),l(re(c,t)),v(!E),ae("Filtering by ".concat(t,"."),{appearance:"success",autoDismiss:!0}));case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),re=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:W;switch(t){case"recent":e.sort((function(e,t){return R()(t.created_at)-R()(e.created_at)}));break;default:e.sort((function(e,t){return t.upvotes.length-e.upvotes.length}))}return e},ce=function(){j(!1),z(null)};return r.a.createElement("div",{className:"w-100 h-100 d-flex flex-column",ref:ee},r.a.createElement(m.a,{show:x,onHide:ce},r.a.createElement(m.a.Header,{closeButton:!0},r.a.createElement(m.a.Title,null,"Upload a Meme")),r.a.createElement(m.a.Body,{className:"d-flex flex-column align-items-center"},P?r.a.createElement("button",{className:"bg-transparent border-0 position-relative",onMouseEnter:function(){return U(!0)},onMouseLeave:function(){return U(!1)},onClick:function(){return z(null)}},r.a.createElement("img",{src:URL.createObjectURL(P),alt:"memeToUpload",style:{borderRadius:5,width:"70%"}}),L?r.a.createElement("div",{className:"position-absolute d-flex flex-row align-items-center justify-content-center",style:{left:0,top:0,bottom:0,right:0,backgroundColor:"rgba(255, 255, 255, 0.4)"}},r.a.createElement(ye.a,{className:"text-danger",size:50})):r.a.createElement("div",null)):r.a.createElement(ke.a,{onDrop:function(e){return z(e[0])}},(function(e){var t=e.getRootProps,a=e.getInputProps;return(r.a.createElement("section",null,r.a.createElement("div",t({className:"dropzone",onMouseEnter:function(){return S(r.a.createElement(he.a,{size:100}))},onMouseLeave:function(){return S(r.a.createElement(b.a,{size:100}))}}),r.a.createElement("input",a({multiple:!1,accept:"image/png, image/jpeg, image/gif"})),k,r.a.createElement("span",null,"Drag 'n' drop some files here, or click to select files"))))})),X?r.a.createElement(Ce.a,{now:Q,label:"".concat(Q,"%"),className:"w-100 mt-2"}):null),r.a.createElement(m.a.Footer,null,r.a.createElement(d.a,{variant:"primary",className:"d-flex flex-row align-items-center",onClick:function(){if(P){$(!0);var t={url:"",created_at:"",upvotes:[],user:e.user,meme_id:""};Z.a.firestore().collection("memes").add(t).then((function(e){t.meme_id=e.id,Z.a.storage().ref("images/".concat(t.meme_id)).put(P).on("state_changed",(function(e){var t=Math.round(e.bytesTransferred/e.totalBytes*100);Y(t)}),(function(e){console.log(e),ae("There was a problem adding the meme.",{appearance:"error",autoDismiss:!0})}),(function(){Z.a.storage().ref("images").child(t.meme_id).getDownloadURL().then((function(e){t.url=e,t.created_at=R()().toISOString(),Z.a.firestore().collection("memes").doc(t.meme_id).update(t).then((function(){var e=c;e.push(t),l(re(e)),$(!1),ce(),ae("Meme added.",{appearance:"success",autoDismiss:!0})})).catch((function(e){console.log(e),ae("There was a problem adding the meme.",{appearance:"error",autoDismiss:!0})}))})).catch((function(e){console.log(e),ae("There was a problem adding the meme.",{appearance:"error",autoDismiss:!0})}))}))})).catch((function(e){console.log(e),ae("There was a problem adding the meme.",{appearance:"error",autoDismiss:!0})}))}}},r.a.createElement(he.a,{className:"mr-1"})," Upload Meme"))),r.a.createElement("h3",{className:te?"align-self-center px-3 pt-3":"px-3 pt-3"},"Coronavirus Memes"),r.a.createElement("div",{className:"d-flex flex-row align-items-center justify-content-between mb-3 px-3"},r.a.createElement(d.a,{variant:"success",onClick:function(){return j(!0)},disabled:!e.authed},e.authed?"+ Add Meme":"Login to add memes"),r.a.createElement(we.a,null,r.a.createElement(we.a.Toggle,{variant:"light"},"Filter ",r.a.createElement(be.a,null)),r.a.createElement(we.a.Menu,null,r.a.createElement(we.a.Item,{onClick:function(){return ne("popular")},style:{backgroundColor:"popular"===W?"lightgray":"white"}},r.a.createElement("div",{className:"d-flex flex-row align-items-center"},r.a.createElement("span",{className:"flex"},"Popular")," ",r.a.createElement(Ee.a,null))),r.a.createElement(we.a.Item,{onClick:function(){return ne("recent")},style:{backgroundColor:"recent"===W?"lightgray":"white"}},r.a.createElement("div",{className:"d-flex flex-row align-items-center"},r.a.createElement("span",{className:"flex"},"Recent")," ",r.a.createElement(ve.a,null)))))),p?r.a.createElement("div",{className:"d-flex align-items-center justify-content-center w-100 flex"},r.a.createElement(O,{color:"lime",size:100,className:"spinning-logo"})):r.a.createElement("div",{className:"flex p-3"},r.a.createElement(M.Scrollbars,{hideTracksWhenNotNeeded:!0,renderView:function(e){return r.a.createElement("div",e)}},r.a.createElement(_e.a,{className:"pr-3 pb-5 d-flex w-100",breakpointCols:{default:4,1224:3,900:2,700:1},columnClassName:"align-items-center mx-1"},c.map((function(t){return r.a.createElement("div",{className:"border d-inline-block m-1 w-100",style:{borderRadius:10,borderColor:"lightgray"},key:t.meme_id},r.a.createElement("img",{src:t.url,alt:t.meme_id,className:"w-100 p-2"}),r.a.createElement("div",{style:{height:1,width:"100%",backgroundColor:"lightgray"}}),r.a.createElement("div",{className:te?"p-2 d-flex flex-column justify-content-center":"p-2 d-flex flex-row align-items-center"},r.a.createElement("div",{className:"flex"},r.a.createElement("span",null,"Submitted by: "),r.a.createElement("span",{style:{color:"#".concat(t.user.username_color)}},t.user.username),r.a.createElement(T.a,{countryCode:t.user.country,className:"ml-1"})),r.a.createElement("div",{className:"d-flex flex-row align-items-center"},e.authed&&"admin"===e.user.type?r.a.createElement("button",{className:"bg-transparent border-0",onClick:function(){return e=t.meme_id,void(window.confirm("Are you sure you want to delete that meme?")&&Z.a.firestore().collection("memes").doc(e).delete().then((function(){Z.a.storage().ref("images/".concat(e)).delete().then((function(){l(re(c.filter((function(t){return t.meme_id!==e})))),v(!E),ae("The meme was deleted.",{appearance:"success",autoDismiss:!0})})).catch((function(e){console.log(e),ae("There was a problem deleting the meme.",{appearance:"error",autoDismiss:!0})}))})).catch((function(e){console.log(e),ae("There was a problem deleting the meme.",{appearance:"error",autoDismiss:!0})})));var e}},r.a.createElement(ye.a,{className:"text-danger"})):null,r.a.createElement("span",null,"(",t.upvotes.length,")"),r.a.createElement("button",{className:"bg-transparent border-0",onClick:function(){return function(t){var a=c.findIndex((function(e){return e.meme_id===t})),n=c[a].upvotes;n.includes(e.user.user_id)?n=n.filter((function(t){return t!==e.user.user_id})):n.push(e.user.user_id);var r=c;r[a]=Object(o.a)({},r[a],{upvotes:n}),Z.a.firestore().collection("memes").doc(t).update({upvotes:n}).then((function(){l(re(r)),v(!E),ae("Upvote toggled.",{appearance:"success",autoDismiss:!0})})).catch((function(e){console.log(e),ae("There was a problem toggling the upvote.",{appearance:"error",autoDismiss:!0})}))}(t.meme_id)},disabled:!e.authed,title:e.authed?null:"Login to enable upvoting"},r.a.createElement(Ee.a,{color:e.authed?t.upvotes.includes(e.user.user_id)?"gold":"black":"gray"})))))}))))))}));var De=function(){var e=Object(N.useMediaQuery)({query:"(max-device-width: 1024px)"});return(r.a.createElement(j.a,{store:ae},r.a.createElement(D.ToastProvider,{autoDismissTimeout:3e3,placement:e?"bottom-center":"top-right"},r.a.createElement(x.a,null,r.a.createElement("div",{className:"d-flex flex-row h-100"},r.a.createElement(S,null),r.a.createElement(k.c,null,r.a.createElement(k.a,{path:"/map"},r.a.createElement(U,null)),r.a.createElement(k.a,{path:"/chat"},r.a.createElement(H,null)),r.a.createElement(k.a,{path:"/music"},r.a.createElement(Ne,null)),r.a.createElement(k.a,{path:"/memes"},r.a.createElement(Te,null)),r.a.createElement(k.a,{path:"/login"},r.a.createElement(X,null)),r.a.createElement(k.a,{path:"/register"},r.a.createElement(ce,null)),r.a.createElement(k.a,{path:"/settings"},r.a.createElement(se,null)),r.a.createElement(k.a,{path:"/"},r.a.createElement(z,null))))))))};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));var Ie=a(72),Le=a.n(Ie),Ue=(a(520),a(521),a(522),a(523),a(524),function(e){var t={username:e.displayName,country:"US",username_color:"000000",user_id:e.uid};Le.a.firestore().collection("users").doc(e.uid).set(t).then((function(){return ae.dispatch({type:"UPDATE_USER",user:t})}))});Le.a.initializeApp({apiKey:"AIzaSyCBuW_IWsZ1biICjlWto_ySrSBiH8e0ZkA",authDomain:"covinfo.firebaseapp.com",databaseURL:"https://covinfo.firebaseio.com",projectId:"covinfo",storageBucket:"covinfo.appspot.com",messagingSenderId:"174794034863",appId:"1:174794034863:web:a865952aec9b1154d6ce5a",measurementId:"G-G84RNWQM40"}),Le.a.analytics(),Le.a.performance(),Le.a.auth().onAuthStateChanged((function(e){e?Le.a.firestore().collection("users").doc(e.uid).get().then((function(t){t.exists?ae.dispatch({type:"UPDATE_USER",user:t.data()}):Ue(e)})).catch((function(t){Ue(e)})):ae.dispatch({type:"CLEAR_USER"})})),l.a.render(r.a.createElement(r.a.StrictMode,null,r.a.createElement(De,null)),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))}},[[273,1,2]]]);
//# sourceMappingURL=main.c314fd67.chunk.js.map